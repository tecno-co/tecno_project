(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{X69v:function(t,e,i){"use strict";i.r(e),i.d(e,"StatusesModule",function(){return Z});var c=i("ofXK"),a=i("zkoq"),n=i("7EHt"),s=i("bSwM"),r=i("MutI"),o=i("iadO"),l=i("FKr1"),b=i("bTqV"),m=i("kmnG"),u=i("qFsG"),d=i("+0xr"),p=i("NFeN"),h=i("M9IT"),f=i("3Pt+"),S=i("vxfF"),g=i("tyNb"),k=i("fXoL"),w=i("tk/3"),T=i("AytR");let _=(()=>{class t{constructor(t){this.http=t,this.API=T.a.API+"/item_histories_filter_report",this.emitFilter=new k.o}getFilteredStatus(t,e=null){if("json"==t.format){let e={headers:new w.c({Authorization:"Bareer "+sessionStorage.token}),params:t};return this.http.get(""+this.API,e).subscribe(e=>{this.emitFilter.emit({data:e,params:t})})}if("excel"==t.format){let i={headers:new w.c({Authorization:"Bareer "+sessionStorage.token}),params:t,responseType:"blob"};this.http.get(""+this.API,i).subscribe(t=>{let i=t.type,c=[];c.push(t);let a=document.createElement("a");a.href=window.URL.createObjectURL(new Blob(c,{type:i})),a.setAttribute("download",e||"Report Status "+new Date),document.body.appendChild(a),a.click()})}}}return t.\u0275fac=function(e){return new(e||t)(k.Xb(w.a))},t.\u0275prov=k.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var v=i("ZOSX"),F=i("gBDi"),x=i("8cn1"),y=i("qfBg");function D(t,e){if(1&t){const t=k.Ub();k.Tb(0,"mat-list-item"),k.Tb(1,"mat-checkbox",12),k.ac("click",function(){k.uc(t);const i=e.$implicit;return k.ec().clickProject(i.id)}),k.Hc(2),k.Sb(),k.Sb()}if(2&t){const t=e.$implicit;k.Bb(2),k.Jc(" ",t.title," ")}}function H(t,e){if(1&t){const t=k.Ub();k.Tb(0,"mat-list-item"),k.Tb(1,"mat-checkbox",12),k.ac("click",function(){k.uc(t);const i=e.$implicit;return k.ec().clickItem(i.id)}),k.Hc(2),k.Sb(),k.Sb()}if(2&t){const t=e.$implicit;k.Bb(2),k.Jc(" ",t.title," ")}}function B(t,e){if(1&t){const t=k.Ub();k.Tb(0,"mat-list-item"),k.Tb(1,"mat-checkbox",12),k.ac("click",function(){k.uc(t);const i=e.$implicit;return k.ec().clickUserM(i.id)}),k.Hc(2),k.Sb(),k.Sb()}if(2&t){const t=e.$implicit;k.Bb(2),k.Kc(" ",t.firstname," ",t.lastname," ")}}let C=(()=>{class t{constructor(t,e,i,c,a,n,s){this._itemsService=t,this._projectsService=e,this._iconsService=i,this._usersService=c,this.fb=a,this.datepipe=n,this._itemHistoriesFilterService=s,this.projectsSelected=[],this.itemsSelected=[],this.usersMSelected=[],this.hideRequiredControl=new f.f(!1),this.floatLabelControl=new f.f("auto")}ngOnInit(){this._usersService.getUsers().subscribe(t=>this.users=t),this._iconsService.getIcons().subscribe(t=>this.icons=t),this._itemsService.getItems().subscribe(t=>this.items=t),this._projectsService.getProjects().subscribe(t=>this.projects=t),this.dates=this.fb.group({hideRequired:this.hideRequiredControl,floatLabel:this.floatLabelControl,startDate:[],endDate:[]}),this.filtrar()}clickProject(t){this.projectsSelected.includes(t)?this.projectsSelected=this.projectsSelected.filter(e=>e!=t):this.projectsSelected.push(t)}clickItem(t){this.itemsSelected.includes(t)?this.itemsSelected=this.itemsSelected.filter(e=>e!=t):this.itemsSelected.push(t)}clickUserM(t){this.usersMSelected.includes(t)?this.usersMSelected=this.usersMSelected.filter(e=>e!=t):this.usersMSelected.push(t)}parseDate(t){if(t+""=="Invalid Date"||null==t)return null;{let i;try{i=new Date(t)}catch(e){i=new Date}finally{return this.datepipe.transform(i,"yyyy-MM-dd")}}}getIcon(t){return this.icons.filter(e=>e.id==t)[0].title}filtrar(){var t={sysuser_id:sessionStorage.id,format:"json"};this.projectsSelected.length>0&&(t.project_id=this.projectsSelected[0]),this.itemsSelected.length>0&&(t.item_id=this.itemsSelected[0]);var e=this.parseDate(this.dates.get("startDate").value);null!=e&&(t.date_from=e);var i=this.parseDate(this.dates.get("endDate").value);null!=i&&(t.date_until=i),this.usersMSelected.length>0&&(t.user_updates_id=this.usersMSelected[0]),this._itemHistoriesFilterService.getFilteredStatus(t)}}return t.\u0275fac=function(e){return new(e||t)(k.Nb(v.a),k.Nb(F.a),k.Nb(x.a),k.Nb(y.a),k.Nb(f.e),k.Nb(c.e),k.Nb(_))},t.\u0275cmp=k.Hb({type:t,selectors:[["tecno-statuses-filter"]],decls:48,vars:12,consts:[[1,"general-container"],[2,"width","100%"],[1,"example-viewport",3,"itemSize"],[4,"cdkVirtualFor","cdkVirtualForOf"],[3,"formGroup"],[1,"field-full"],["matInput","","formControlName","startDate",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["matInput","","formControlName","endDate",3,"matDatepicker"],["picker2",""],["mat-flat-button","","color","primary",2,"width","80%","margin","10%",3,"click"],[3,"click"]],template:function(t,e){if(1&t&&(k.Tb(0,"div",0),k.Tb(1,"mat-accordion",1),k.Tb(2,"mat-expansion-panel",1),k.Tb(3,"mat-expansion-panel-header"),k.Tb(4,"mat-panel-title"),k.Hc(5," Proyectos "),k.Sb(),k.Sb(),k.Tb(6,"cdk-virtual-scroll-viewport",2),k.Tb(7,"mat-list"),k.Fc(8,D,3,1,"mat-list-item",3),k.Sb(),k.Sb(),k.Sb(),k.Tb(9,"mat-expansion-panel",1),k.Tb(10,"mat-expansion-panel-header"),k.Tb(11,"mat-panel-title"),k.Hc(12," Requerimientos "),k.Sb(),k.Sb(),k.Tb(13,"cdk-virtual-scroll-viewport",2),k.Tb(14,"mat-list"),k.Fc(15,H,3,1,"mat-list-item",3),k.Sb(),k.Sb(),k.Sb(),k.Tb(16,"mat-expansion-panel",1),k.Tb(17,"mat-expansion-panel-header"),k.Tb(18,"mat-panel-title"),k.Hc(19," Fecha "),k.Sb(),k.Sb(),k.Tb(20,"cdk-virtual-scroll-viewport",2),k.Tb(21,"form",4),k.Tb(22,"mat-list"),k.Tb(23,"mat-list-item"),k.Tb(24,"mat-form-field",5),k.Tb(25,"mat-label"),k.Hc(26,"Fecha Inicial"),k.Sb(),k.Ob(27,"input",6),k.Ob(28,"mat-datepicker-toggle",7),k.Ob(29,"mat-datepicker",null,8),k.Sb(),k.Sb(),k.Tb(31,"mat-list-item"),k.Tb(32,"mat-form-field",5),k.Tb(33,"mat-label"),k.Hc(34,"Fecha final"),k.Sb(),k.Ob(35,"input",9),k.Ob(36,"mat-datepicker-toggle",7),k.Ob(37,"mat-datepicker",null,10),k.Sb(),k.Sb(),k.Sb(),k.Sb(),k.Sb(),k.Sb(),k.Tb(39,"mat-expansion-panel",1),k.Tb(40,"mat-expansion-panel-header"),k.Tb(41,"mat-panel-title"),k.Hc(42," Usuario modificaci\xf3n "),k.Sb(),k.Sb(),k.Tb(43,"cdk-virtual-scroll-viewport",2),k.Tb(44,"mat-list"),k.Fc(45,B,3,2,"mat-list-item",3),k.Sb(),k.Sb(),k.Sb(),k.Sb(),k.Tb(46,"button",11),k.ac("click",function(){return e.filtrar()}),k.Hc(47,"Filtrar"),k.Sb(),k.Sb()),2&t){const t=k.rc(30),i=k.rc(38);k.Bb(6),k.kc("itemSize",4),k.Bb(2),k.kc("cdkVirtualForOf",e.projects),k.Bb(5),k.kc("itemSize",4),k.Bb(2),k.kc("cdkVirtualForOf",e.items),k.Bb(5),k.kc("itemSize",4),k.Bb(1),k.kc("formGroup",e.dates),k.Bb(6),k.kc("matDatepicker",t),k.Bb(1),k.kc("for",t),k.Bb(7),k.kc("matDatepicker",i),k.Bb(1),k.kc("for",i),k.Bb(7),k.kc("itemSize",4),k.Bb(2),k.kc("cdkVirtualForOf",e.users)}},directives:[n.a,n.c,n.g,n.h,S.e,S.a,r.a,S.d,f.u,f.o,f.i,r.b,m.c,m.g,u.b,f.c,o.d,f.n,f.g,o.f,m.h,o.c,b.a,s.a],styles:[".general-container[_ngcontent-%COMP%]{width:400px}.checkbox[_ngcontent-%COMP%]{justify-content:flex-start!important;width:100%!important}.example-viewport[_ngcontent-%COMP%]{height:200px;width:350px}"]}),t})();function O(t,e){1&t&&(k.Tb(0,"th",18),k.Hc(1," # Requerimiento "),k.Sb())}function j(t,e){if(1&t&&(k.Tb(0,"td",19),k.Hc(1),k.Sb()),2&t){const t=e.$implicit;k.Bb(1),k.Jc(" ",t.item_id," ")}}function M(t,e){1&t&&(k.Tb(0,"th",18),k.Hc(1," Nombre "),k.Sb())}function I(t,e){if(1&t&&(k.Tb(0,"td",19),k.Hc(1),k.Sb()),2&t){const t=e.$implicit;k.Bb(1),k.Jc(" ",t.item_title," ")}}function P(t,e){1&t&&(k.Tb(0,"th",18),k.Hc(1," Estatus "),k.Sb())}function R(t,e){if(1&t&&(k.Tb(0,"td",19),k.Hc(1),k.Sb()),2&t){const t=e.$implicit;k.Bb(1),k.Jc(" ",t.item_status," ")}}function N(t,e){1&t&&(k.Tb(0,"th",18),k.Hc(1," Fecha actualizaci\xf3n "),k.Sb())}function q(t,e){if(1&t&&(k.Tb(0,"td",19),k.Hc(1),k.Sb()),2&t){const t=e.$implicit;k.Bb(1),k.Jc(" ",t.date_change," ")}}function z(t,e){1&t&&(k.Tb(0,"th",18),k.Hc(1," Proyecto "),k.Sb())}function $(t,e){if(1&t&&(k.Tb(0,"td",19),k.Hc(1),k.Sb()),2&t){const t=e.$implicit;k.Bb(1),k.Jc(" ",t.project_title," ")}}function A(t,e){1&t&&(k.Tb(0,"th",18),k.Hc(1," Usuario "),k.Sb())}function J(t,e){if(1&t&&(k.Tb(0,"td",19),k.Hc(1),k.Sb()),2&t){const t=e.$implicit;k.Bb(1),k.Jc(" ",t.user_updates_name," ")}}function L(t,e){1&t&&k.Ob(0,"tr",20)}function U(t,e){1&t&&k.Ob(0,"tr",21)}const Q=function(){return[5,10,20,50]};function V(t,e){if(1&t&&(k.Tb(0,"div",5),k.Tb(1,"table",6),k.Rb(2,7),k.Fc(3,O,2,0,"th",8),k.Fc(4,j,2,1,"td",9),k.Qb(),k.Rb(5,10),k.Fc(6,M,2,0,"th",8),k.Fc(7,I,2,1,"td",9),k.Qb(),k.Rb(8,11),k.Fc(9,P,2,0,"th",8),k.Fc(10,R,2,1,"td",9),k.Qb(),k.Rb(11,12),k.Fc(12,N,2,0,"th",8),k.Fc(13,q,2,1,"td",9),k.Qb(),k.Rb(14,13),k.Fc(15,z,2,0,"th",8),k.Fc(16,$,2,1,"td",9),k.Qb(),k.Rb(17,14),k.Fc(18,A,2,0,"th",8),k.Fc(19,J,2,1,"td",9),k.Qb(),k.Fc(20,L,1,0,"tr",15),k.Fc(21,U,1,0,"tr",16),k.Sb(),k.Ob(22,"mat-paginator",17),k.Sb()),2&t){const t=k.ec();k.Bb(1),k.kc("dataSource",t.dataSource),k.Bb(19),k.kc("matHeaderRowDef",t.displayedColumns),k.Bb(1),k.kc("matRowDefColumns",t.displayedColumns),k.Bb(1),k.kc("pageSizeOptions",k.mc(4,Q))}}function K(t,e){1&t&&(k.Tb(0,"div",22),k.Tb(1,"h1"),k.Hc(2,"No se encontraron registros"),k.Sb(),k.Sb())}const X=[{path:"",component:(()=>{class t{constructor(t){this._itemHistoriesFilterService=t,this.displayedColumns=["item_id","item_title","item_status","date_change","project_title","user_updates_name"],this.dataSource=new d.p,this.datos=[]}set matPaginator(t){this.paginator=t,this.setDataSourceAttributes()}setDataSourceAttributes(){this.dataSource.paginator=this.paginator}ngAfterViewInit(){this.dataSource.paginator=this.paginator}ngOnInit(){this._itemHistoriesFilterService.emitFilter.subscribe(t=>{var e=[];for(let i=0;i<t.data.length;i++)e.push(t.data[i]);this.dataSource.data=e,this.paramsDownload=t.params,this.paramsDownload.format="excel"})}download(){this._itemHistoriesFilterService.getFilteredStatus(this.paramsDownload)}lleno(){return this.dataSource.data.length>0}}return t.\u0275fac=function(e){return new(e||t)(k.Nb(_))},t.\u0275cmp=k.Hb({type:t,selectors:[["tecno-statuses"]],viewQuery:function(t,e){var i;1&t&&(k.Lc(h.a,!0),k.Lc(h.a,!0)),2&t&&(k.qc(i=k.bc())&&(e.paginator=i.first),k.qc(i=k.bc())&&(e.matPaginator=i.first))},decls:12,vars:2,consts:[[1,"buttons"],["mat-mini-fab","","color","accent","aria-label","Descargar archivo Excel",3,"click"],[1,"container-general"],["class","container-list","style","color: white;",4,"ngIf"],["class","container-message",4,"ngIf"],[1,"container-list",2,"color","white"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","item_id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","item_title"],["matColumnDef","item_status"],["matColumnDef","date_change"],["matColumnDef","project_title"],["matColumnDef","user_updates_name"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""],[1,"container-message"]],template:function(t,e){1&t&&(k.Tb(0,"h2"),k.Hc(1,"Status/"),k.Sb(),k.Tb(2,"h1"),k.Hc(3,"Status"),k.Sb(),k.Tb(4,"div",0),k.Tb(5,"button",1),k.ac("click",function(){return e.download()}),k.Tb(6,"mat-icon"),k.Hc(7,"get_app"),k.Sb(),k.Sb(),k.Sb(),k.Tb(8,"div",2),k.Ob(9,"tecno-statuses-filter"),k.Fc(10,V,23,5,"div",3),k.Fc(11,K,3,0,"div",4),k.Sb()),2&t&&(k.Bb(10),k.kc("ngIf",e.lleno()),k.Bb(1),k.kc("ngIf",!e.lleno()))},directives:[b.a,p.a,C,c.m,d.o,d.c,d.i,d.b,d.k,d.n,h.a,d.h,d.a,d.j,d.m],styles:[".container-general[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;width:100%}.container-list[_ngcontent-%COMP%], .container-message[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:70%}.container-message[_ngcontent-%COMP%]{height:100%;align-items:center;justify-items:center}mat-divider[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:5px;width:100%;border-width:1px}.text-inside-grid[_ngcontent-%COMP%]{position:absolute;left:5px}mat-table[_ngcontent-%COMP%]{background-color:#ff0;width:100%}.buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end;width:97%;margin-bottom:10px}"]}),t})()}];let E=(()=>{class t{}return t.\u0275mod=k.Lb({type:t}),t.\u0275inj=k.Kb({factory:function(e){return new(e||t)},imports:[[g.e.forChild(X)],g.e]}),t})();const G=[a.b,n.b,s.b,r.c,o.e,l.n,b.b,m.e,u.c,l.u,d.q,p.b,h.b];let Z=(()=>{class t{}return t.\u0275mod=k.Lb({type:t}),t.\u0275inj=k.Kb({factory:function(e){return new(e||t)},providers:[c.e],imports:[[c.c,G,S.g,f.r,E],a.b,n.b,s.b,r.c,o.e,l.n,b.b,m.e,u.c,l.u,d.q,p.b,h.b,S.g,f.r]}),t})()}}]);