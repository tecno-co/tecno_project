(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{oGf6:function(e,t,i){"use strict";i.r(t),i.d(t,"ItemsModule",function(){return xt});var o=i("ofXK"),s=i("tyNb"),r=i("3Pt+"),a=i("fXoL"),n=i("LK8z");let c=(()=>{class e{constructor(e){this._companiesService=e}resolve(e,t){return this._companiesService.getDevelopersCompanies()}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(n.a))},e.\u0275prov=a.Jb({token:e,factory:e.\u0275fac}),e})();var l=i("tk/3"),m=i("vkgz"),b=i("AytR");let p=(()=>{class e{constructor(e){this.http=e,this.API=b.a.API+"/item_priorities"}getItemPriorities(){var e={headers:new l.c({Authorization:"Bareer "+sessionStorage.token})};return this.http.get(this.API,e).pipe(Object(m.a)(console.log))}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(l.a))},e.\u0275prov=a.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),d=(()=>{class e{constructor(e){this._ItemPrioritiesService=e}resolve(e,t){return this._ItemPrioritiesService.getItemPriorities()}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(p))},e.\u0275prov=a.Jb({token:e,factory:e.\u0275fac}),e})();var u=i("gBDi");let h=(()=>{class e{constructor(e){this._projectsService=e}resolve(e,t){return this._projectsService.getProject(parseInt(e.params.id))}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(u.a))},e.\u0275prov=a.Jb({token:e,factory:e.\u0275fac}),e})(),f=(()=>{class e{constructor(e){this._companiesService=e}resolve(e,t){return this._companiesService.getSponsorsCompanies()}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(n.a))},e.\u0275prov=a.Jb({token:e,factory:e.\u0275fac}),e})(),g=(()=>{class e{constructor(e){this.http=e,this.API=b.a.API+"/item_statuses"}getItemStatus(e){var t={headers:new l.c({Authorization:"Bareer "+sessionStorage.token})};let i=this.API;return e&&(i+="?project_id="+e),this.http.get(i,t).pipe(Object(m.a)(console.log))}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(l.a))},e.\u0275prov=a.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),T=(()=>{class e{constructor(e,t){this._itemStatusService=e,this._projectsService=t}resolve(e,t){return this._itemStatusService.getItemStatus(e.params.id)}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(g),a.Xb(u.a))},e.\u0275prov=a.Jb({token:e,factory:e.\u0275fac}),e})();var S=i("qfBg");let v=(()=>{class e{constructor(e){this._usersService=e}resolve(e,t){return this._usersService.getUsers()}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(S.a))},e.\u0275prov=a.Jb({token:e,factory:e.\u0275fac}),e})(),_=(()=>{class e{constructor(e){this.http=e,this.API=b.a.API+"/item_resolutions"}getItemResolutions(){var e={headers:new l.c({Authorization:"Bareer "+sessionStorage.token})};return this.http.get(this.API,e).pipe(Object(m.a)(console.log))}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(l.a))},e.\u0275prov=a.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),C=(()=>{class e{constructor(e){this._itemResolutionsService=e}resolve(e,t){return this._itemResolutionsService.getItemResolutions()}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(_))},e.\u0275prov=a.Jb({token:e,factory:e.\u0275fac}),e})(),I=(()=>{class e{constructor(e){this.http=e,this.API=b.a.API+"/item_severities"}getItemSeverities(){var e={headers:new l.c({Authorization:"Bareer "+sessionStorage.token})};return this.http.get(this.API,e).pipe(Object(m.a)(console.log))}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(l.a))},e.\u0275prov=a.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),k=(()=>{class e{constructor(e){this._itemSeveritiesService=e}resolve(e,t){return this._itemSeveritiesService.getItemSeverities()}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(I))},e.\u0275prov=a.Jb({token:e,factory:e.\u0275fac}),e})(),y=(()=>{class e{constructor(e){this.http=e,this.API=b.a.API+"/components"}getComponents(){var e={headers:new l.c({Authorization:"Bareer "+sessionStorage.token})};return this.http.get(this.API,e).pipe(Object(m.a)(console.log))}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(l.a))},e.\u0275prov=a.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),w=(()=>{class e{constructor(e){this._componentsService=e}resolve(e,t){return this._componentsService.getComponents()}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(y))},e.\u0275prov=a.Jb({token:e,factory:e.\u0275fac}),e})(),B=(()=>{class e{constructor(e){this.http=e,this.API=b.a.API+"/item_types"}getItemTypes(){var e={headers:new l.c({Authorization:"Bareer "+sessionStorage.token})};return this.http.get(this.API,e).pipe(Object(m.a)(console.log))}getItemType(e){var t={headers:new l.c({Authorization:"Bareer "+sessionStorage.token})};return this.http.get(`${this.API}/${e}`,t).pipe(Object(m.a)(console.log))}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(l.a))},e.\u0275prov=a.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),O=(()=>{class e{constructor(e){this._itemTypesService=e}resolve(e,t){return this._itemTypesService.getItemTypes()}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(B))},e.\u0275prov=a.Jb({token:e,factory:e.\u0275fac}),e})(),x=(()=>{class e{constructor(e){this.http=e,this.API=b.a.API+"/temporal_items",this.emitDeleteTemporalItem=new a.o,this.emitAddTemporalItem=new a.o}getTemporalItemsByProjectId(e){var t={headers:new l.c({Authorization:"Bareer "+sessionStorage.token})};return this.http.get(`${this.API}/project_items/${e}`,t).pipe(Object(m.a)(console.log))}addTemporalItem(e){var t={headers:new l.c({Authorization:"Bareer "+sessionStorage.token})};return this.http.post(this.API,e,t).pipe(Object(m.a)(console.log)).subscribe(e=>{this.emitAddTemporalItem.emit(e)})}deleteTemporalItem(e){var t={headers:new l.c({Authorization:"Bareer "+sessionStorage.token})};return this.http.delete(`${this.API}/${e}`,t).pipe(Object(m.a)(console.log)).subscribe(e=>this.emitDeleteTemporalItem.emit(e))}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(l.a))},e.\u0275prov=a.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),D=(()=>{class e{constructor(e){this._temporalItemsService=e}resolve(e,t){return this._temporalItemsService.getTemporalItemsByProjectId(e.params.id)}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(x))},e.\u0275prov=a.Jb({token:e,factory:e.\u0275fac}),e})();var P=i("+0xr"),H=i("M9IT"),R=i("Dh3D"),q=i("qFsG"),M=i("kmnG"),j=i("bTqV"),F=i("NFeN"),N=i("0IaG"),A=i("d3UM"),L=i("QibW"),z=i("bSwM"),$=i("/t3+"),E=i("zkoq"),J=i("7EHt"),U=i("iadO"),X=i("f0Cb"),V=i("wZkO"),G=i("A5z7"),K=i("STbY"),Q=i("FKr1"),W=i("dNgK"),Z=i("xHqg"),Y=i("5+WD"),ee=i("MutI"),te=i("/1cH"),ie=i("hGdz"),oe=i("B/XX"),se=i("ZOSX"),re=i("8cn1"),ae=i("+d0d");const ne=["stepper"];function ce(e,t){1&e&&(a.Tb(0,"button",6),a.Hc(1,"Cerrar"),a.Sb())}function le(e,t){if(1&e&&(a.Tb(0,"mat-toolbar",2),a.Tb(1,"h1",3),a.Hc(2),a.Sb(),a.Ob(3,"span",4),a.Fc(4,ce,2,0,"button",5),a.Sb()),2&e){const e=a.ec();a.Bb(2),a.Kc("",e.labelAction," Requerimiento ",e.project.title,""),a.Bb(2),a.kc("ngIf",e.showBtnClose)}}function me(e,t){if(1&e&&(a.Tb(0,"mat-option",16),a.Hc(1),a.Sb()),2&e){const e=t.$implicit;a.kc("value",e.id),a.Bb(1),a.Ic(e.title)}}function be(e,t){if(1&e&&(a.Tb(0,"mat-option",16),a.Hc(1),a.Sb()),2&e){const e=t.$implicit;a.kc("value",e.id),a.Bb(1),a.Ic(e.title)}}function pe(e,t){if(1&e&&(a.Tb(0,"mat-option",16),a.Hc(1),a.Sb()),2&e){const e=t.$implicit;a.kc("value",e.id),a.Bb(1),a.Ic(e.title)}}function de(e,t){1&e&&(a.Tb(0,"div",55),a.Hc(1," Campos Informaci\xf3n b\xe1sica (*) imcompletos "),a.Sb())}function ue(e,t){if(1&e&&(a.Tb(0,"mat-option",16),a.Tb(1,"mat-icon"),a.Hc(2),a.Sb(),a.Hc(3),a.Sb()),2&e){const e=t.$implicit;a.kc("value",e.id),a.Bb(1),a.Eb("txt-",e.color,""),a.Bb(1),a.Ic(e.iconName),a.Bb(1),a.Jc(" ",e.title," ")}}function he(e,t){if(1&e&&(a.Tb(0,"mat-option",16),a.Hc(1),a.Sb()),2&e){const e=t.$implicit;a.kc("value",e.id),a.Bb(1),a.Ic(e.title)}}function fe(e,t){if(1&e&&(a.Tb(0,"mat-option",16),a.Hc(1),a.Sb()),2&e){const e=t.$implicit;a.kc("value",e.id),a.Bb(1),a.Ic(e.title)}}function ge(e,t){if(1&e&&(a.Tb(0,"mat-option",16),a.Hc(1),a.Sb()),2&e){const e=t.$implicit;a.kc("value",e.id),a.Bb(1),a.Kc("",e.firstname," ",e.lastname,"")}}function Te(e,t){if(1&e&&(a.Tb(0,"mat-option",16),a.Tb(1,"mat-icon"),a.Hc(2),a.Sb(),a.Hc(3),a.Sb()),2&e){const e=t.$implicit,i=a.ec(2);a.kc("value",e.id),a.Bb(1),a.Eb("txt-",e.color,""),a.Bb(1),a.Ic(i.getIcon(e.icon_id).title),a.Bb(1),a.Jc(" ",e.title," ")}}function Se(e,t){if(1&e&&(a.Tb(0,"mat-option",16),a.Hc(1),a.Sb()),2&e){const e=t.$implicit;a.kc("value",e.id),a.Bb(1),a.Ic(e.title)}}function ve(e,t){1&e&&(a.Tb(0,"div",55),a.Hc(1," Campos Informaci\xf3n espec\xedfica (*) imcompletos "),a.Sb())}function _e(e,t){1&e&&(a.Tb(0,"div",55),a.Hc(1," Campos Informaci\xf3n b\xe1sica (*) incompletos "),a.Sb())}function Ce(e,t){1&e&&(a.Tb(0,"div",55),a.Hc(1," Campos Informaci\xf3n espec\xedfica (*) incompletos "),a.Sb())}function Ie(e,t){1&e&&(a.Tb(0,"div",55),a.Hc(1," Campos Tiempos y Fechas (*) incompletos "),a.Sb())}function ke(e,t){if(1&e){const e=a.Ub();a.Tb(0,"button",29),a.ac("click",function(){return a.uc(e),a.ec(2).modificarData()}),a.Hc(1,"Modificar"),a.Sb()}}function ye(e,t){if(1&e){const e=a.Ub();a.Tb(0,"button",29),a.ac("click",function(){return a.uc(e),a.ec(2).guardarData()}),a.Hc(1,"Crear"),a.Sb()}}function we(e,t){if(1&e){const e=a.Ub();a.Tb(0,"button",29),a.ac("click",function(){a.uc(e);const t=a.ec(2);return t.tempToItem(t.item.id)}),a.Hc(1,"Guardar"),a.Sb()}}function Be(e,t){if(1&e){const e=a.Ub();a.Tb(0,"div",7),a.Tb(1,"mat-horizontal-stepper",8,9),a.Tb(3,"mat-step",10),a.Tb(4,"form",11),a.Tb(5,"mat-grid-list",12),a.Tb(6,"mat-grid-tile",13),a.Tb(7,"mat-form-field",14),a.Tb(8,"mat-select",15),a.ac("valueChange",function(t){return a.uc(e),a.ec().project.id=t}),a.Tb(9,"mat-option",16),a.Hc(10),a.Sb(),a.Sb(),a.Tb(11,"mat-label"),a.Hc(12,"Proyecto"),a.Sb(),a.Sb(),a.Sb(),a.Tb(13,"mat-grid-tile",13),a.Tb(14,"mat-form-field",17),a.Ob(15,"input",18),a.Sb(),a.Sb(),a.Tb(16,"mat-grid-tile",13),a.Tb(17,"mat-form-field",19),a.Tb(18,"mat-label"),a.Hc(19,"Ingrese una descripci\xf3n del requerimiento"),a.Sb(),a.Ob(20,"textarea",20),a.Sb(),a.Sb(),a.Tb(21,"mat-grid-tile",13),a.Tb(22,"mat-form-field",21),a.Tb(23,"mat-select",22),a.ac("openedChange",function(t){return a.uc(e),a.ec()._openItemPriorities(t)}),a.Tb(24,"mat-option"),a.Hc(25,"--None--"),a.Sb(),a.Fc(26,me,2,2,"mat-option",23),a.Sb(),a.Tb(27,"mat-label"),a.Hc(28,"Prioridad"),a.Sb(),a.Sb(),a.Sb(),a.Tb(29,"mat-grid-tile",13),a.Tb(30,"mat-form-field",21),a.Tb(31,"mat-select",24),a.ac("openedChange",function(t){return a.uc(e),a.ec()._openSponsorsCompanies(t)}),a.Tb(32,"mat-option"),a.Hc(33,"--None--"),a.Sb(),a.Fc(34,be,2,2,"mat-option",23),a.Sb(),a.Tb(35,"mat-label"),a.Hc(36,"Compa\xf1\xeda"),a.Sb(),a.Sb(),a.Sb(),a.Tb(37,"mat-grid-tile",13),a.Tb(38,"mat-form-field",25),a.Tb(39,"mat-select",26),a.ac("openedChange",function(t){return a.uc(e),a.ec()._openComponents(t)}),a.Tb(40,"mat-option"),a.Hc(41,"-- None --"),a.Sb(),a.Fc(42,pe,2,2,"mat-option",23),a.Sb(),a.Tb(43,"mat-label"),a.Hc(44,"Componente"),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Tb(45,"div",27),a.Fc(46,de,2,0,"div",28),a.Tb(47,"button",29),a.ac("click",function(){a.uc(e);const t=a.rc(2);return a.ec().nextBasic(t)}),a.Hc(48,"Siguiente"),a.Sb(),a.Sb(),a.Sb(),a.Tb(49,"mat-step",30),a.Tb(50,"form",11),a.Tb(51,"mat-grid-list",12),a.Tb(52,"mat-grid-tile",13),a.Tb(53,"mat-form-field",25),a.Tb(54,"mat-select",31),a.ac("openedChange",function(t){return a.uc(e),a.ec()._openItemTypes(t)}),a.Tb(55,"mat-select-trigger"),a.Tb(56,"mat-icon"),a.Hc(57),a.Sb(),a.Hc(58),a.Sb(),a.Tb(59,"mat-option"),a.Hc(60,"-- None --"),a.Sb(),a.Fc(61,ue,4,6,"mat-option",23),a.Sb(),a.Tb(62,"mat-label"),a.Hc(63,"Tipo"),a.Sb(),a.Sb(),a.Sb(),a.Tb(64,"mat-grid-tile",13),a.Tb(65,"mat-form-field",21),a.Tb(66,"mat-select",32),a.ac("openedChange",function(t){return a.uc(e),a.ec()._openItemSeverities(t)}),a.Tb(67,"mat-option"),a.Hc(68,"-- None --"),a.Sb(),a.Fc(69,he,2,2,"mat-option",23),a.Sb(),a.Tb(70,"mat-label"),a.Hc(71,"Complejidad"),a.Sb(),a.Sb(),a.Sb(),a.Tb(72,"mat-grid-tile",13),a.Tb(73,"mat-form-field",25),a.Tb(74,"mat-select",33),a.ac("openedChange",function(t){return a.uc(e),a.ec()._openItemResolutions(t)}),a.Tb(75,"mat-option"),a.Hc(76,"-- None --"),a.Sb(),a.Fc(77,fe,2,2,"mat-option",23),a.Sb(),a.Tb(78,"mat-label"),a.Hc(79),a.Sb(),a.Sb(),a.Sb(),a.Tb(80,"mat-grid-tile",13),a.Tb(81,"mat-form-field",34),a.Tb(82,"mat-select",35),a.ac("openedChange",function(t){return a.uc(e),a.ec()._openUsers(t)}),a.Tb(83,"mat-option"),a.Hc(84,"-- None --"),a.Sb(),a.Fc(85,ge,2,3,"mat-option",23),a.Sb(),a.Tb(86,"mat-label"),a.Hc(87,"Reportado por"),a.Sb(),a.Sb(),a.Sb(),a.Tb(88,"mat-grid-tile",13),a.Tb(89,"mat-form-field",25),a.Tb(90,"mat-select",36),a.ac("openedChange",function(t){return a.uc(e),a.ec()._openStatus(t)}),a.Tb(91,"mat-select-trigger"),a.Tb(92,"mat-icon"),a.Hc(93),a.Sb(),a.Hc(94),a.Sb(),a.Tb(95,"mat-option"),a.Hc(96,"-- None --"),a.Sb(),a.Fc(97,Te,4,6,"mat-option",23),a.Sb(),a.Tb(98,"mat-label"),a.Hc(99,"Estado"),a.Sb(),a.Sb(),a.Sb(),a.Tb(100,"mat-grid-tile",37),a.Tb(101,"mat-form-field",25),a.Tb(102,"mat-label"),a.Hc(103,"Porcentaje Completado"),a.Sb(),a.Ob(104,"input",38),a.Sb(),a.Sb(),a.Tb(105,"mat-grid-tile",13),a.Tb(106,"mat-form-field",21),a.Tb(107,"mat-select",39),a.ac("openedChange",function(t){return a.uc(e),a.ec()._openDevelopersCompanies(t)}),a.Tb(108,"mat-option"),a.Hc(109,"--None--"),a.Sb(),a.Fc(110,Se,2,2,"mat-option",23),a.Sb(),a.Tb(111,"mat-label"),a.Hc(112,"Compa\xf1\xeda Desarrolladora"),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Tb(113,"div",27),a.Fc(114,ve,2,0,"div",28),a.Tb(115,"button",40),a.ac("click",function(){a.uc(e);const t=a.rc(2);return a.ec().back(t)}),a.Hc(116,"Anterior"),a.Sb(),a.Tb(117,"button",29),a.ac("click",function(){a.uc(e);const t=a.rc(2);return a.ec().nextSpecific(t)}),a.Hc(118,"Siguiente"),a.Sb(),a.Sb(),a.Sb(),a.Tb(119,"mat-step",41),a.Tb(120,"form",11),a.Tb(121,"mat-grid-list",12),a.Tb(122,"mat-grid-tile",37),a.Tb(123,"mat-form-field",25),a.Tb(124,"mat-label"),a.Hc(125,"Fecha de recepci\xf3n"),a.Sb(),a.Ob(126,"input",42),a.Ob(127,"mat-datepicker-toggle",43),a.Ob(128,"mat-datepicker",null,44),a.Sb(),a.Sb(),a.Tb(130,"mat-grid-tile",37),a.Tb(131,"mat-form-field",45),a.Tb(132,"mat-label"),a.Hc(133),a.Sb(),a.Ob(134,"input",46),a.Ob(135,"mat-datepicker-toggle",43),a.Ob(136,"mat-datepicker",null,47),a.Sb(),a.Sb(),a.Tb(138,"mat-grid-tile",37),a.Tb(139,"mat-form-field",45),a.Tb(140,"mat-label"),a.Hc(141),a.Sb(),a.Ob(142,"input",48),a.Ob(143,"mat-datepicker-toggle",43),a.Ob(144,"mat-datepicker",null,49),a.Sb(),a.Sb(),a.Tb(146,"mat-grid-tile",37),a.Tb(147,"mat-form-field",45),a.Tb(148,"mat-label"),a.Hc(149,"Fecha de Real de Finalizaci\xf3n"),a.Sb(),a.Ob(150,"input",50),a.Ob(151,"mat-datepicker-toggle",43),a.Ob(152,"mat-datepicker",null,51),a.Sb(),a.Sb(),a.Tb(154,"mat-grid-tile",37),a.Tb(155,"mat-form-field",25),a.Tb(156,"mat-label"),a.Hc(157,"Horas Estimadas"),a.Sb(),a.Ob(158,"input",52),a.Sb(),a.Sb(),a.Tb(159,"mat-grid-tile",37),a.Tb(160,"mat-form-field",25),a.Tb(161,"mat-label"),a.Hc(162,"Minutos Estimadas"),a.Sb(),a.Ob(163,"input",53),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Tb(164,"div",27),a.Fc(165,_e,2,0,"div",28),a.Fc(166,Ce,2,0,"div",28),a.Fc(167,Ie,2,0,"div",28),a.Tb(168,"button",40),a.ac("click",function(){a.uc(e);const t=a.rc(2);return a.ec().back(t)}),a.Hc(169,"Anterior"),a.Sb(),a.Fc(170,ke,2,0,"button",54),a.Fc(171,ye,2,0,"button",54),a.Fc(172,we,2,0,"button",54),a.Sb(),a.Sb(),a.Sb(),a.Sb()}if(2&e){const e=a.rc(129),t=a.rc(137),i=a.rc(145),o=a.rc(153),s=a.ec();a.Bb(1),a.kc("linear",!0),a.Bb(2),a.kc("stepControl",s.basic)("completed",!0),a.Bb(1),a.kc("formGroup",s.basic),a.Bb(2),a.kc("colspan",1)("rowspan",1),a.Bb(1),a.kc("hideRequiredMarker",s.hideRequiredControl.value)("floatLabel",s.floatLabelControl.value),a.Bb(1),a.kc("value",s.project.id)("disabled",!0),a.Bb(1),a.kc("value",s.project.id),a.Bb(1),a.Ic(s.project.title),a.Bb(3),a.kc("colspan",2)("rowspan",1),a.Bb(1),a.kc("hideRequiredMarker",s.hideRequiredControl.value)("floatLabel",s.floatLabelControl.value),a.Bb(2),a.kc("colspan",3)("rowspan",1),a.Bb(1),a.kc("floatLabel",s.floatLabelControl.value),a.Bb(4),a.kc("colspan",1)("rowspan",1),a.Bb(1),a.kc("hideRequiredMarker",s.hideRequiredControl.value),a.Bb(4),a.kc("ngForOf",s.itemPriorities),a.Bb(3),a.kc("colspan",1)("rowspan",1),a.Bb(1),a.kc("hideRequiredMarker",s.hideRequiredControl.value),a.Bb(4),a.kc("ngForOf",s.companies),a.Bb(3),a.kc("colspan",1)("rowspan",1),a.Bb(1),a.kc("hideRequiredMarker",s.hideRequiredControl.value)("floatLabel",s.floatLabelControl.value),a.Bb(4),a.kc("ngForOf",s.components),a.Bb(4),a.kc("ngIf",s.verificacionBasic),a.Bb(3),a.kc("stepControl",s.specific),a.Bb(1),a.kc("formGroup",s.specific),a.Bb(2),a.kc("colspan",1)("rowspan",1),a.Bb(1),a.kc("hideRequiredMarker",s.hideRequiredControl.value)("floatLabel",s.floatLabelControl.value),a.Bb(3),a.Eb("txt-",s.getSelectedType().color,""),a.Bb(1),a.Ic(s.getSelectedType().iconName),a.Bb(1),a.Jc(" ",s.getSelectedType().title," "),a.Bb(3),a.kc("ngForOf",s.itemTypes),a.Bb(3),a.kc("colspan",1)("rowspan",1),a.Bb(1),a.kc("hideRequiredMarker",s.hideRequiredControl.value)("floatLabel",s.floatLabelControl.value),a.Bb(4),a.kc("ngForOf",s.itemSeverities),a.Bb(3),a.kc("colspan",1)("rowspan",1),a.Bb(1),a.kc("hideRequiredMarker",s.hideRequiredControl.value)("floatLabel",s.floatLabelControl.value),a.Bb(4),a.kc("ngForOf",s.itemResolutions),a.Bb(2),a.Jc("Resoluci\xf3n ",s.requiredResolution,""),a.Bb(1),a.kc("colspan",1)("rowspan",1),a.Bb(1),a.kc("hideRequiredMarker",s.hideRequiredControl.value)("floatLabel",s.floatLabelControl.value),a.Bb(4),a.kc("ngForOf",s.users),a.Bb(3),a.kc("colspan",1)("rowspan",1),a.Bb(1),a.kc("hideRequiredMarker",s.hideRequiredControl.value)("floatLabel",s.floatLabelControl.value),a.Bb(1),a.kc("disabled","create"==s.mode),a.Bb(2),a.Eb("txt-",s.getSelectedStatus().color,""),a.Bb(1),a.Ic(s.getIcon(s.getSelectedStatus().icon_id).title),a.Bb(1),a.Jc(" ",s.getSelectedStatus().title," "),a.Bb(3),a.kc("ngForOf",s.itemStatus),a.Bb(3),a.kc("colspan",1)("rowspan",1),a.Bb(1),a.kc("hideRequiredMarker",s.hideRequiredControl.value)("floatLabel",s.floatLabelControl.value),a.Bb(4),a.kc("colspan",1)("rowspan",1),a.Bb(1),a.kc("hideRequiredMarker",s.hideRequiredControl.value),a.Bb(4),a.kc("ngForOf",s.developersCompanies),a.Bb(4),a.kc("ngIf",s.verificacionSpecific),a.Bb(5),a.kc("stepControl",s.timesDates),a.Bb(1),a.kc("formGroup",s.timesDates),a.Bb(2),a.kc("colspan",1)("rowspan",1),a.Bb(1),a.kc("hideRequiredMarker",s.hideRequiredControl.value)("floatLabel",s.floatLabelControl.value),a.Bb(3),a.kc("matDatepicker",e),a.Bb(1),a.kc("for",e),a.Bb(3),a.kc("colspan",1)("rowspan",1),a.Bb(3),a.Jc("Fecha de Inicio ",s.requiredStart,""),a.Bb(1),a.kc("matDatepicker",t),a.Bb(1),a.kc("for",t),a.Bb(3),a.kc("colspan",1)("rowspan",1),a.Bb(3),a.Jc("Fecha de Finalizaci\xf3n ",s.requiredStart,""),a.Bb(1),a.kc("matDatepicker",i),a.Bb(1),a.kc("for",i),a.Bb(3),a.kc("colspan",1)("rowspan",1),a.Bb(4),a.kc("matDatepicker",o),a.Bb(1),a.kc("for",o),a.Bb(3),a.kc("colspan",1)("rowspan",1),a.Bb(1),a.kc("hideRequiredMarker",s.hideRequiredControl.value)("floatLabel",s.floatLabelControl.value),a.Bb(4),a.kc("colspan",1)("rowspan",1),a.Bb(1),a.kc("hideRequiredMarker",s.hideRequiredControl.value)("floatLabel",s.floatLabelControl.value),a.Bb(5),a.kc("ngIf",s.verificacionBasic),a.Bb(1),a.kc("ngIf",s.verificacionSpecific),a.Bb(1),a.kc("ngIf",s.verificacionTimesDates),a.Bb(3),a.kc("ngIf","modify"==s.mode),a.Bb(1),a.kc("ngIf","create"==s.mode),a.Bb(1),a.kc("ngIf","tempToItem"==s.mode)}}let Oe=(()=>{class e{constructor(e,t,i,o,s,a,n,c,l,m,b,p,d,u,h,f,g,T){this.fbB=e,this.fbE=t,this.fbDT=i,this._companiesService=o,this._componentsService=s,this._itemSeveritiesService=a,this._itemResolutionsService=n,this._userService=c,this._itemPrioritiesService=l,this._itemsService=m,this._itemTypesService=b,this._iconsService=p,this._itemStatusService=d,this._temporalItemsService=u,this._colorsService=h,this.datepipe=f,this.route=g,this.dialogRef=T,this.companies=[],this.developersCompanies=[],this.components=[],this.itemSeverities=[],this.itemResolutions=[],this.users=[],this.itemPriorities=[],this.itemTypes=[],this.itemStatus=[],this.requiredStart="",this.requiredResolution="",this.modificaciones={},this.verificacionBasic=!1,this.verificacionSpecific=!1,this.verificacionTimesDates=!1,this.colors=[],this.hideRequiredControl=new r.f(!1),this.floatLabelControl=new r.f("auto"),this.showBtnClose=!0}ngOnInit(){this.selectedStatus=this.item.item_status_id,"create"==this.mode&&(this.selectedStatus=1==this.project.template.id?1:12),console.log(this.project.selectedStatus),console.log("Project: ",this.project),this.route.data.subscribe(e=>{var t,i;console.log("---------++++++++++",e),Object.keys(e).length>0&&(console.log("entro",e),this.icons=e.icons,this.project=e.project,this.companies=e.sponsorsCompanies,this.developersCompanies=e.developersCompanies,this.components=e.components,this.itemPriorities=e.itemPriorities,this.itemTypes=e.itemTypes,this.itemSeverities=e.itemSeverities,this.itemResolutions=e.itemResolutions,this.users=e.users,this.itemStatus=e.itemStatus),console.log("-------\x3e icons: ",this.icons),console.log("-------\x3e project: ",this.project),console.log("-------\x3e item: ",this.item),console.log("-------\x3e statuses: ",this.itemStatus),this.basic=this.fbB.group({hideRequired:this.hideRequiredControl,floatLabel:this.floatLabelControl,projectControl:[this.project.id,[r.t.required]],titleControl:[this.item.title,[r.t.required]],itemDescriptionControl:[this.item.description,[r.t.required]],itemPrioritiesControl:[this.item.item_priority_id,[r.t.required]],companyControl:[this.item.company_id,[r.t.required]],componentControl:[this.item.component_id,[r.t.required]]}),console.log(">>>>>>>>>>>>>>>>>>>>>> this.item: ",this.item),this.specific=this.fbE.group({hideRequired:this.hideRequiredControl,floatLabel:this.floatLabelControl,itemSeverityControl:[this.item.item_severity_id,[r.t.required]],itemResolutionsControl:[this.item.item_resolution_id],usersControl:[this.item.reported_by_id,[r.t.required]],selectItemTypes:[this.item.item_type_id,[r.t.required]],statusControl:[this.selectedStatus,[r.t.required]],developerCompanyControl:[this.item.developer_company_id],percentControl:[this.item.percent_complete]}),this.timesDates=this.fbDT.group({hideRequired:this.hideRequiredControl,floatLabel:this.floatLabelControl,hoursControl:[null===(t=this.item.estimated_time)||void 0===t?void 0:t.hours],minutesControl:[null===(i=this.item.estimated_time)||void 0===i?void 0:i.minutes],receptionDateControl:[new Date(this.item.reception_date+":00:00"),[r.t.required]],startDateControl:[new Date(this.item.start_date+":00:00"),[r.t.required]],dueDateControl:[new Date(this.item.due_date+":00:00"),[r.t.required]],realDueDateControl:[new Date(this.item.real_due_date+":00:00")]}),this.requiredResolution=17==this.specific.get("statusControl").value||10==this.specific.get("statusControl").value||9==this.specific.get("statusControl").value?" *":"",this.requiredStart=1!=this.specific.get("statusControl").value&&12!=this.specific.get("statusControl").value?" *":""})}_openStatus(e){e&&this._itemStatusService.getItemStatus(1).subscribe(e=>this.itemStatus=e)}_openSponsorsCompanies(e){e&&this._companiesService.getSponsorsCompanies().subscribe(e=>this.companies=e)}_openComponents(e){e&&this._componentsService.getComponents().subscribe(e=>this.components=e.filter(e=>e.sponsor_company_id==this.basic.get("companyControl").value))}_openDevelopersCompanies(e){e&&this._companiesService.getDevelopersCompanies().subscribe(e=>this.developersCompanies=e)}_openItemSeverities(e){e&&this._itemSeveritiesService.getItemSeverities().subscribe(e=>this.itemSeverities=e.filter(e=>e.template_id==this.project.template.id))}_openItemResolutions(e){e&&this._itemResolutionsService.getItemResolutions().subscribe(e=>this.itemResolutions=e.filter(e=>e.template_id==this.project.template.id))}_openUsers(e){e&&this._userService.getUsers().subscribe(e=>this.users=e)}_openItemPriorities(e){e&&this._itemPrioritiesService.getItemPriorities().subscribe(e=>this.itemPriorities=e.filter(e=>e.template_id==this.project.template.id))}_openItemTypes(e){e&&this._itemTypesService.getItemTypes().subscribe(e=>{this.itemTypes=e.filter(e=>e.template_id==this.project.template.id);for(let i=0;i<this.itemTypes.length;i++){var t=this.icons.filter(e=>e.id==this.itemTypes[i].icon_id)[0];null!=t&&(this.itemTypes[i].iconName=t.title)}})}getSelectedType(){var e=this.itemTypes.filter(e=>e.id==this.specific.get("selectItemTypes").value)[0];return null!=e?e:{}}getSelectedStatus(){this.requiredStart=1!=this.specific.get("statusControl").value&&12!=this.specific.get("statusControl").value?" *":"",this.requiredResolution=17==this.specific.get("statusControl").value||10==this.specific.get("statusControl").value||9==this.specific.get("statusControl").value?" *":"";var e=this.itemStatus.filter(e=>e.id==this.specific.get("statusControl").value)[0];return null!=e?e:{}}getIcon(e){if(null!=e){var t=this.icons.filter(t=>t.id==e)[0];return null!=t?t:{title:""}}return{title:""}}onNoClick(){}errorBasic(){var e=!1;return null!=this.basic.get("titleControl").errors&&this.basic.get("titleControl").errors.required&&(e=!0),null!=this.basic.get("itemDescriptionControl").errors&&this.basic.get("itemDescriptionControl").errors.required&&(e=!0),null!=this.basic.get("itemPrioritiesControl").errors&&this.basic.get("itemPrioritiesControl").errors.required&&(e=!0),null!=this.basic.get("companyControl").errors&&this.basic.get("companyControl").errors.required&&(e=!0),null!=this.basic.get("componentControl").errors&&this.basic.get("componentControl").errors.required&&(e=!0),this.verificacionBasic=!!e,e}errorSpecific(){var e=!1;return null!=this.specific.get("developerCompanyControl").errors&&this.specific.get("developerCompanyControl").errors.required&&(e=!0),null!=this.specific.get("selectItemTypes").errors&&this.specific.get("selectItemTypes").errors.required&&(e=!0),null!=this.specific.get("itemSeverityControl").errors&&this.specific.get("itemSeverityControl").errors.required&&(e=!0),17!=this.specific.get("statusControl").value&&10!=this.specific.get("statusControl").value&&9!=this.specific.get("statusControl").value||null==this.specific.get("itemResolutionsControl").value&&(e=!0),null!=this.specific.get("usersControl").errors&&this.specific.get("usersControl").errors.required&&(e=!0),null!=this.specific.get("statusControl").errors&&this.specific.get("statusControl").errors.required&&(e=!0),this.verificacionSpecific=!!e,e}errorTimesDates(){var e=!1;return null!=this.timesDates.get("receptionDateControl").errors&&(e=!0),null!=this.timesDates.get("dueDateControl").errors&&1!=this.specific.get("statusControl").value&&12!=this.specific.get("statusControl").value&&(e=!0),null!=this.timesDates.get("startDateControl").errors&&1!=this.specific.get("statusControl").value&&12!=this.specific.get("statusControl").value&&(e=!0),this.verificacionTimesDates=!!e,e}guardarData(){this.errorBasic()||this.errorSpecific()||this.errorTimesDates()||(this.newItem={title:this.basic.get("titleControl").value,description:this.basic.get("itemDescriptionControl").value,company_id:this.basic.get("companyControl").value,developer_company_id:this.specific.get("developerCompanyControl").value,project_id:this.project.id,component_id:this.basic.get("componentControl").value,item_type_id:this.specific.get("selectItemTypes").value,item_priority_id:this.basic.get("itemPrioritiesControl").value,item_severity_id:this.specific.get("itemSeverityControl").value,item_status_id:this.specific.get("statusControl").value,item_resolution_id:this.specific.get("itemResolutionsControl").value,reported_by_id:this.specific.get("usersControl").value,is_active:1,user_creates_id:sessionStorage.id,user_updates_id:sessionStorage.id,percent_complete:this.specific.get("percentControl").value,estimate_hours:this.timesDates.get("hoursControl").value,estimate_minutes:this.timesDates.get("minutesControl").value,reception_date:this.parseDate(this.timesDates.get("receptionDateControl").value),start_date:this.parseDate(this.timesDates.get("startDateControl").value),due_date:this.parseDate(this.timesDates.get("dueDateControl").value),real_due_date:this.parseDate(this.timesDates.get("realDueDateControl").value)},this._itemsService.addItem(this.newItem),this.newItem={},this.dialogRef.close())}tempToItem(e){this.errorBasic()||this.errorSpecific()||this.errorTimesDates()||(this.newItem={title:this.basic.get("titleControl").value,description:this.basic.get("itemDescriptionControl").value,company_id:this.basic.get("companyControl").value,project_id:this.project.id,component_id:this.basic.get("componentControl").value,developer_company_id:this.specific.get("developerCompanyControl").value,item_type_id:this.specific.get("selectItemTypes").value,item_priority_id:this.basic.get("itemPrioritiesControl").value,item_severity_id:this.specific.get("itemSeverityControl").value,item_status_id:this.specific.get("statusControl").value,item_resolution_id:this.specific.get("itemResolutionsControl").value,reported_by_id:this.specific.get("usersControl").value,is_active:1,temporal_item_id:this.item.id,user_creates_id:sessionStorage.id,user_updates_id:sessionStorage.id,percent_complete:this.specific.get("percentControl").value,estimate_hours:this.timesDates.get("hoursControl").value,estimate_minutes:this.timesDates.get("minutesControl").value,reception_date:this.parseDate(this.timesDates.get("receptionDateControl").value),start_date:this.parseDate(this.timesDates.get("startDateControl").value),due_date:this.parseDate(this.timesDates.get("dueDateControl").value),real_due_date:this.parseDate(this.timesDates.get("realDueDateControl").value)},this._itemsService.createFromTemporal(this.newItem,e),this.newItem={})}modificarData(){if(console.log("Entra modificarData"),this.errorBasic()||this.errorSpecific()||this.errorTimesDates())console.log("Hay un error");else{var e=!1;this.item.title!=this.basic.get("titleControl").value&&(this.modificaciones.title=this.basic.get("titleControl").value,e=!0),this.item.company_id!=this.basic.get("companyControl").value&&(this.modificaciones.company_id=this.basic.get("companyControl").value,e=!0),this.item.developer_company_id!=this.specific.get("developerCompanyControl").value&&(this.modificaciones.developer_company_id=this.specific.get("developerCompanyControl").value,e=!0),this.item.description!=this.basic.get("itemDescriptionControl").value&&(this.modificaciones.description=this.basic.get("itemDescriptionControl").value,e=!0),this.item.component_id!=this.basic.get("componentControl").value&&(this.modificaciones.component_id=this.basic.get("componentControl").value,e=!0),this.item.item_severity_id!=this.specific.get("itemSeverityControl").value&&(this.modificaciones.item_severity_id=this.specific.get("itemSeverityControl").value,e=!0),this.item.item_resolution_id!=this.specific.get("itemResolutionsControl").value&&(this.modificaciones.item_resolution_id=this.specific.get("itemResolutionsControl").value,e=!0),this.item.reported_by_id!=this.specific.get("usersControl").value&&(this.modificaciones.reported_by_id=this.specific.get("usersControl").value,e=!0),this.item.item_priority_id!=this.basic.get("itemPrioritiesControl").value&&(this.modificaciones.item_priority_id=this.basic.get("itemPrioritiesControl").value,e=!0),this.item.item_type_id!=this.specific.get("selectItemTypes").value&&(this.modificaciones.item_type_id=this.specific.get("selectItemTypes").value,e=!0),this.item.item_status_id!=this.specific.get("statusControl").value&&(this.modificaciones.item_status_id=this.specific.get("statusControl").value,e=!0),this.item.percent_complete!=this.specific.get("percentControl").value&&(this.modificaciones.percent_complete=this.specific.get("percentControl").value,e=!0),this.item.estimate_hours!=this.timesDates.get("hoursControl").value&&(this.modificaciones.estimate_hours=this.timesDates.get("hoursControl").value,e=!0),this.item.estimate_minutes!=this.timesDates.get("minutesControl").value&&(this.modificaciones.estimate_minutes=this.timesDates.get("minutesControl").value,e=!0),this.item.reception_date!=this.parseDate(this.timesDates.get("receptionDateControl").value)&&(this.modificaciones.reception_date=this.parseDate(this.timesDates.get("receptionDateControl").value),e=!0),this.item.start_date!=this.parseDate(this.timesDates.get("startDateControl").value)&&(this.modificaciones.start_date=this.parseDate(this.timesDates.get("startDateControl").value),e=!0),this.item.due_date!=this.parseDate(this.timesDates.get("dueDateControl").value)&&(this.modificaciones.due_date=this.parseDate(this.timesDates.get("dueDateControl").value),e=!0),this.item.real_due_date!=this.parseDate(this.timesDates.get("realDueDateControl").value)&&(this.modificaciones.real_due_date=this.parseDate(this.timesDates.get("realDueDateControl").value),e=!0),e&&(this.modificaciones.user_updates_id=sessionStorage.id,this._itemsService.modifyItem(this.item.id,this.modificaciones)),this.modificaciones={}}}nextBasic(e){this.errorBasic()?console.log("Error"):e.next()}nextSpecific(e){this.errorSpecific()?console.log("Error"):e.next()}back(e){e.previous()}parseDate(e){if(""==e)return null;if(e+""=="Invalid Date")return null;{let i;try{i=new Date(e)}catch(t){i=new Date}finally{return this.datepipe.transform(i,"yyyy-MM-dd")}}}}return e.\u0275fac=function(t){return new(t||e)(a.Nb(r.e),a.Nb(r.e),a.Nb(r.e),a.Nb(n.a),a.Nb(y),a.Nb(I),a.Nb(_),a.Nb(S.a),a.Nb(p),a.Nb(se.a),a.Nb(B),a.Nb(re.a),a.Nb(g),a.Nb(x),a.Nb(ae.a),a.Nb(o.e),a.Nb(s.a),a.Nb(N.f))},e.\u0275cmp=a.Hb({type:e,selectors:[["tecno-items-form"]],viewQuery:function(e,t){var i;1&e&&a.Lc(ne,!0),2&e&&a.qc(i=a.bc())&&(t.stepper=i.first)},inputs:{mode:"mode",labelAction:"labelAction",item:"item",company_id:"company_id",developer_company_id:"developer_company_id",project:"project",showBtnClose:"showBtnClose",icons:"icons"},decls:2,vars:2,consts:[["color","primary","style","border-top-left-radius: 5px; border-top-right-radius: 5px;","class","mat-elevation-z4",4,"ngIf"],["class","example-container bg-color-white mat-elevation-z4",4,"ngIf"],["color","primary",1,"mat-elevation-z4",2,"border-top-left-radius","5px","border-top-right-radius","5px"],[1,"mat-headline"],[1,"example-spacer"],["mat-button","","mat-dialog-close","",4,"ngIf"],["mat-button","","mat-dialog-close",""],[1,"example-container","bg-color-white","mat-elevation-z4"],[3,"linear"],["stepper",""],["label","Informaci\xf3n b\xe1sica",3,"stepControl","completed"],[3,"formGroup"],["cols","3","rowHeight","100px"],[3,"colspan","rowspan"],[1,"field-full","pr-5",3,"hideRequiredMarker","floatLabel"],["required","",3,"value","disabled","valueChange"],[3,"value"],[1,"field-full","pl-5",3,"hideRequiredMarker","floatLabel"],["matInput","","placeholder","T\xedtulo","formControlName","titleControl","required",""],[1,"field-full",3,"floatLabel"],["matInput","","formControlName","itemDescriptionControl","placeholder","Descripci\xf3n","required",""],[1,"field-full","mr-5",3,"hideRequiredMarker","floatLabel"],["required","","formControlName","itemPrioritiesControl",3,"openedChange"],[3,"value",4,"ngFor","ngForOf"],["required","","formControlName","companyControl",3,"openedChange"],[1,"field-full","ml-5","mr-5",3,"hideRequiredMarker","floatLabel"],["required","","formControlName","componentControl",3,"openedChange"],[1,"buttons"],["class","error-message",4,"ngIf"],["mat-raised-button","","color","primary",1,"button",3,"click"],["label","Informaci\xf3n especif\xedca",3,"stepControl"],["required","","formControlName","selectItemTypes",3,"openedChange"],["required","","formControlName","itemSeverityControl",3,"openedChange"],["formControlName","itemResolutionsControl",3,"openedChange"],[1,"field-full","ml-5",3,"hideRequiredMarker","floatLabel"],["formControlName","usersControl","required","",3,"openedChange"],["required","","formControlName","statusControl",3,"disabled","openedChange"],[1,"txt-right",3,"colspan","rowspan"],["matInput","","placeholder","Porcentaje Completado","type","number","formControlName","percentControl"],["formControlName","developerCompanyControl",3,"openedChange"],["mat-raised-button","","color","accent",1,"button",3,"click"],["label","Tiempos y Fechas ",3,"stepControl"],["matInput","","required","","formControlName","receptionDateControl",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],[1,"field-full"],["matInput","","formControlName","startDateControl",3,"matDatepicker"],["picker2",""],["matInput","","formControlName","dueDateControl",3,"matDatepicker"],["picker3",""],["matInput","","formControlName","realDueDateControl",3,"matDatepicker"],["picker4",""],["matInput","","placeholder","Horas Estimadas","type","number","formControlName","hoursControl"],["matInput","","placeholder","Minutos Estimadas","type","number","formControlName","minutesControl"],["class","button","mat-raised-button","","color","primary",3,"click",4,"ngIf"],[1,"error-message"]],template:function(e,t){1&e&&(a.Fc(0,le,5,3,"mat-toolbar",0),a.Fc(1,Be,173,117,"div",1)),2&e&&(a.kc("ngIf",t.project),a.Bb(1),a.kc("ngIf",t.project))},directives:[o.m,$.a,j.a,N.c,Z.a,Z.b,r.u,r.o,r.i,E.a,E.c,M.c,A.a,Q.o,M.g,q.b,r.c,r.n,r.g,r.s,o.l,A.c,F.a,r.q,U.d,U.f,M.h,U.c],styles:[".example-container[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%] + .mat-form-field[_ngcontent-%COMP%]{margin-left:20px}.example-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin-bottom:20px}.example-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:5px 0}.example-container[_ngcontent-%COMP%]   .mat-radio-button[_ngcontent-%COMP%]{margin:0 12px}.example-container[_ngcontent-%COMP%]{padding:24px}.error-message[_ngcontent-%COMP%]{color:red}.buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end}.button[_ngcontent-%COMP%]{margin-left:10px}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}"]}),e})();class xe{}function De(e,t){if(1&e&&(a.Tb(0,"mat-option",9),a.Tb(1,"mat-icon"),a.Hc(2),a.Sb(),a.Hc(3),a.Sb()),2&e){const e=t.$implicit;a.kc("value",e.id),a.Bb(1),a.Eb("txt-",e.color,""),a.Bb(1),a.Ic(e.iconName),a.Bb(1),a.Jc(" ",e.title," ")}}function Pe(e,t){if(1&e){const e=a.Ub();a.Tb(0,"mat-grid-list",2),a.Tb(1,"mat-grid-tile",3),a.Tb(2,"mat-form-field",4),a.Tb(3,"mat-select",5),a.ac("openedChange",function(t){return a.uc(e),a.ec()._openItemTypes(t)}),a.Tb(4,"mat-select-trigger"),a.Tb(5,"mat-icon"),a.Hc(6),a.Sb(),a.Hc(7),a.Sb(),a.Fc(8,De,4,6,"mat-option",6),a.Sb(),a.Tb(9,"mat-label"),a.Hc(10,"Tipo"),a.Sb(),a.Sb(),a.Sb(),a.Tb(11,"mat-grid-tile",3),a.Tb(12,"mat-form-field",7),a.Tb(13,"mat-label"),a.Hc(14,"Requerimiento"),a.Sb(),a.Tb(15,"input",8),a.ac("keydown.enter",function(){return a.uc(e),a.ec().addItemBasic()}),a.Sb(),a.Sb(),a.Sb(),a.Sb()}if(2&e){const e=a.ec();a.Bb(1),a.kc("colspan",2)("rowspan",1),a.Bb(1),a.kc("hideRequiredMarker",e.hideRequiredControl.value)("floatLabel",e.floatLabelControl.value),a.Bb(3),a.Eb("txt-",e.getSelectedType().color,""),a.Bb(1),a.Ic(e.getSelectedType().iconName),a.Bb(1),a.Jc(" ",e.getSelectedType().title," "),a.Bb(1),a.kc("ngForOf",e.itemTypes),a.Bb(3),a.kc("colspan",10)("rowspan",1)}}let He=(()=>{class e{constructor(e,t,i,o,s,n,c){this.fb=e,this._itemsService=t,this._projectsService=i,this._iconsService=o,this._itemTypesService=s,this._temporalItemsSrvice=n,this.route=c,this.icons=[],this.itemTypes=[],this.newTemp={},this.emitFlagCrear=new a.o,this.hideRequiredControl=new r.f(!1),this.floatLabelControl=new r.f("auto"),this.selectItemTypeDefault={id:"1",icon:"assignment",title:"Requerimiento",color:"#4CAF50"},this.selectItemTypes=new r.f("1"),this.selectItemTypesList=[{id:"1",icon:"assignment",title:"Requerimiento",color:"#4CAF50"},{id:"2",icon:"assignment_late",title:"Soporte",color:"#F44336"}]}ngOnInit(){this.route.data.subscribe(e=>{this.icons=e.icons,this.itemTypes=e.itemTypes;for(let i=0;i<this.itemTypes.length;i++){var t=this.icons.filter(e=>e.id==this.itemTypes[i].icon_id)[0];null!=t&&(this.itemTypes[i].iconName=t.title)}}),this.basicOptions=this.fb.group({hideRequired:this.hideRequiredControl,floatLabel:this.floatLabelControl,titleControl:[],selectItemTypes:[1]})}_openItemTypes(e){e&&this._itemTypesService.getItemTypes().subscribe(e=>{this.itemTypes=e;for(let i=0;i<this.itemTypes.length;i++){var t=this.icons.filter(e=>e.id==this.itemTypes[i].icon_id)[0];null!=t&&(this.itemTypes[i].iconName=t.title)}})}getSelectedType(){var e=this.itemTypes.filter(e=>e.id==this.basicOptions.get("selectItemTypes").value)[0];return null!=e?e:{}}addItemBasic(){this.newTemp.item_type_id=this.basicOptions.get("selectItemTypes").value,this.newTemp.title=this.basicOptions.get("titleControl").value,this.newTemp.project_id=this.projectId,this.newTemp.sysuser_id=3,this._temporalItemsSrvice.addTemporalItem(this.newTemp),this.newTemp={},this.emitFlagCrear.emit(!1)}getItemById(e){return this.selectItemTypesList.filter(t=>t.id==e)}}return e.\u0275fac=function(t){return new(t||e)(a.Nb(r.e),a.Nb(se.a),a.Nb(u.a),a.Nb(re.a),a.Nb(B),a.Nb(x),a.Nb(s.a))},e.\u0275cmp=a.Hb({type:e,selectors:[["tecno-items-form-basic"]],inputs:{flagCrear:"flagCrear",projectId:"projectId"},outputs:{emitFlagCrear:"emitFlagCrear"},decls:2,vars:2,consts:[[3,"formGroup"],["cols","12","rowHeight","80px",4,"ngIf"],["cols","12","rowHeight","80px"],[1,"txt-right",3,"colspan","rowspan"],[1,"field-full","ml-5","mr-5",3,"hideRequiredMarker","floatLabel"],["required","","formControlName","selectItemTypes",3,"openedChange"],[3,"value",4,"ngFor","ngForOf"],[1,"field-full"],["matInput","","formControlName","titleControl",3,"keydown.enter"],[3,"value"]],template:function(e,t){1&e&&(a.Tb(0,"form",0),a.Fc(1,Pe,16,12,"mat-grid-list",1),a.Sb()),2&e&&(a.kc("formGroup",t.basicOptions),a.Bb(1),a.kc("ngIf",t.flagCrear))},directives:[r.u,r.o,r.i,o.m,E.a,E.c,M.c,A.a,r.s,r.n,r.g,A.c,F.a,o.l,M.g,q.b,r.c,Q.o],styles:[""]}),e})();var Re=i("KyBI");let qe=(()=>{class e{constructor(e){this.http=e,this.API=b.a.API+"/item_record_times",this.emitAddItemTime=new a.o,this.emitDeleteItemTime=new a.o,this.emitEditItemTime=new a.o}getTimes(){var e={headers:new l.c({Authorization:"Bareer "+sessionStorage.token})};return this.http.get(this.API,e).pipe(Object(m.a)(console.log))}getTimesByItem(e){var t={headers:new l.c({Authorization:"Bareer "+sessionStorage.token})};return this.http.get(`${this.API}/by_item/${e}`,t).pipe(Object(m.a)(console.log))}getTimesByItemUser(e,t){var i={headers:new l.c({Authorization:"Bareer "+sessionStorage.token})};return this.http.get(`${this.API}/by_item_user/${e}/${t}`,i).pipe(Object(m.a)(console.log))}addTime(e){var t={headers:new l.c({Authorization:"Bareer "+sessionStorage.token})};return this.http.post(this.API,e,t).pipe(Object(m.a)(console.log)).subscribe(e=>{this.emitAddItemTime.emit(e)})}updateTime(e,t){var i={headers:new l.c({Authorization:"Bareer "+sessionStorage.token})};return this.http.put(`${this.API}/${t}`,e,i).pipe(Object(m.a)(console.log)).subscribe(e=>{this.emitEditItemTime.emit(e)})}deleteTime(e){var t={headers:new l.c({Authorization:"Bareer "+sessionStorage.token})};return this.http.delete(`${this.API}/${e}`,t).pipe(Object(m.a)(console.log)).subscribe(e=>{this.emitDeleteItemTime.emit(e)})}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(l.a))},e.\u0275prov=a.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Me=i("h4iA");let je=(()=>{class e{constructor(e){this.http=e,this.API=b.a.API+"/item_resources",this.emitAddResource=new a.o,this.emitDeleteResource=new a.o}getResourcesByItem(e){var t={headers:new l.c({Authorization:"Bareer "+sessionStorage.token})};return this.http.get(`${this.API}/by_item/${e}`,t).pipe(Object(m.a)(console.log))}addResource(e){var t={headers:new l.c({Authorization:"Bareer "+sessionStorage.token})};return this.http.post(this.API,e,t).pipe(Object(m.a)(console.log)).subscribe(e=>{this.emitAddResource.emit(e)})}deleteResource(e){var t={headers:new l.c({Authorization:"Bareer "+sessionStorage.token})};return this.http.delete(`${this.API}/${e}`,t).pipe(Object(m.a)(console.log)).subscribe(e=>{this.emitDeleteResource.emit(e)})}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(l.a))},e.\u0275prov=a.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Fe(e,t){if(1&e&&(a.Tb(0,"mat-option",18),a.Hc(1),a.Sb()),2&e){const e=t.$implicit;a.kc("value",e.id),a.Bb(1),a.Kc("",e.firstname," ",e.lastname,"")}}function Ne(e,t){if(1&e&&(a.Tb(0,"mat-option",18),a.Hc(1),a.Sb()),2&e){const e=t.$implicit;a.kc("value",e.id),a.Bb(1),a.Ic(e.title)}}function Ae(e,t){if(1&e){const e=a.Ub();a.Tb(0,"mat-grid-tile",3),a.Tb(1,"button",17),a.ac("click",function(){return a.uc(e),a.ec().crear()}),a.Tb(2,"mat-icon"),a.Hc(3,"add"),a.Sb(),a.Sb(),a.Sb()}2&e&&a.kc("colspan",1)("rowspan",1)}function Le(e,t){if(1&e){const e=a.Ub();a.Tb(0,"mat-grid-tile",3),a.Tb(1,"button",17),a.ac("click",function(){return a.uc(e),a.ec().editar()}),a.Tb(2,"mat-icon"),a.Hc(3,"save"),a.Sb(),a.Sb(),a.Sb()}2&e&&a.kc("colspan",1)("rowspan",1)}function ze(e,t){if(1&e&&(a.Tb(0,"mat-grid-tile",3),a.Tb(1,"span",19),a.Hc(2),a.Sb(),a.Sb()),2&e){const e=a.ec();a.kc("colspan",8)("rowspan",1),a.Bb(2),a.Ic(e.message)}}let $e=(()=>{class e{constructor(e,t,i,o,s,n){this.fb=e,this._itemTimesService=t,this._usersService=i,this._timeTypesService=o,this._itemResourcesService=s,this.datepipe=n,this.newItemTime={},this.users=[],this.usersFitered=[],this.timeTypes=[],this.role=parseInt(sessionStorage.sysrole_id),this.id=parseInt(sessionStorage.id),this.message="",this.validation=!0,this.emitFlagCrearTime=new a.o,this.hideRequiredControl=new r.f(!1),this.floatLabelControl=new r.f("auto"),this.habilitado=!1}ngOnInit(){this.defaultValues=this.flagEditar?{userControl:this.itemTime.user_creates_id,TimeTypeControl:this.itemTime.time_type_id,descriptionControl:this.itemTime.description,dateControl:new Date(this.itemTime.date_work+":00:00"),hoursControl:this.itemTime.hours,minutesControl:this.itemTime.minutes}:{userControl:parseInt(sessionStorage.id),TimeTypeControl:null,descriptionControl:null,dateControl:new Date,hoursControl:8,minutesControl:0},this.habilitado=this.habilitar(),this._usersService.getUsers().subscribe(e=>{this.users=e,this._itemResourcesService.getResourcesByItem(this.itemId).subscribe(e=>{for(let t=0;t<e.length;t++)this.usersFitered.push(this.users.filter(i=>i.id==e[t].sysuser_id)[0]);1==this.role||this.reported_by_id==this.id||this.id==this.lead_id||(this.usersFitered=this.usersFitered.filter(e=>e.id==this.id))})}),this._timeTypesService.getTimeTypes().subscribe(e=>this.timeTypes=e),this.basicTimeOptions=this.fb.group({hideRequired:this.hideRequiredControl,floatLabel:this.floatLabelControl,userControl:[this.defaultValues.userControl,[r.t.required]],TimeTypeControl:[this.defaultValues.TimeTypeControl,[r.t.required]],descriptionControl:[this.defaultValues.descriptionControl,[r.t.required]],dateControl:[this.defaultValues.dateControl,[r.t.required]],hoursControl:[this.defaultValues.hoursControl,[r.t.required]],minutesControl:[this.defaultValues.minutesControl,[r.t.required]]})}parseDate(e){let t;try{t=new Date(e)}catch(i){t=new Date}finally{return this.datepipe.transform(t,"yyyy-MM-dd")}}habilitar(){return 1!=this.role&&this.id!=this.reported_by_id&&this.id!=this.lead_id}validar(){var e=!0,t="";return null!=this.basicTimeOptions.get("userControl").errors&&this.basicTimeOptions.get("userControl").errors.required&&(e=!1,t="Usuario"),null!=this.basicTimeOptions.get("TimeTypeControl").errors&&this.basicTimeOptions.get("TimeTypeControl").errors.required&&(e=!1,""!=t&&(t+=", "),t+="Tipo"),null!=this.basicTimeOptions.get("descriptionControl").errors&&this.basicTimeOptions.get("descriptionControl").errors.required&&(e=!1,""!=t&&(t+=", "),t+="Descripci\xf3n"),null!=this.basicTimeOptions.get("dateControl").errors&&this.basicTimeOptions.get("dateControl").errors.required&&(e=!1,""!=t&&(t+=", "),t+="Fecha"),null!=this.basicTimeOptions.get("hoursControl").errors&&this.basicTimeOptions.get("hoursControl").errors.required&&(e=!1,""!=t&&(t+=", "),t+="Horas"),null!=this.basicTimeOptions.get("minutesControl").errors&&this.basicTimeOptions.get("minutesControl").errors.required&&(e=!1,""!=t&&(t+=", "),t+="Minutos"),e||(t+=" vacio"),this.message=t,e}crear(){this.validation=!0,this.validar()?(this.validation=!0,this.newItemTime.item_id=this.itemId,this.newItemTime.time_type_id=this.basicTimeOptions.get("TimeTypeControl").value,this.newItemTime.description=this.basicTimeOptions.get("descriptionControl").value,this.newItemTime.date_work=this.parseDate(this.basicTimeOptions.get("dateControl").value),this.newItemTime.hours=this.basicTimeOptions.get("hoursControl").value,this.newItemTime.minutes=this.basicTimeOptions.get("minutesControl").value,this.newItemTime.is_active=1,this.newItemTime.user_creates_id=this.basicTimeOptions.get("userControl").value,this.newItemTime.user_updates_id=parseInt(sessionStorage.id),this._itemTimesService.addTime(this.newItemTime),this.newItemTime={},this.emitFlagCrearTime.emit(!1)):this.validation=!1}editar(){if(this.validation=!0,this.validar()){var e=!1;this.basicTimeOptions.get("TimeTypeControl").value!=this.defaultValues.TimeTypeControl&&(this.newItemTime.time_type_id=this.basicTimeOptions.get("TimeTypeControl").value,e=!0),this.basicTimeOptions.get("descriptionControl").value!=this.defaultValues.descriptionControl&&(this.newItemTime.description=this.basicTimeOptions.get("descriptionControl").value,e=!0),this.parseDate(this.basicTimeOptions.get("dateControl").value)!=this.parseDate(this.defaultValues.dateControl)&&(this.newItemTime.date_work=this.parseDate(this.basicTimeOptions.get("dateControl").value),e=!0),this.basicTimeOptions.get("hoursControl").value!=this.defaultValues.hoursControl&&(this.newItemTime.hours=this.basicTimeOptions.get("hoursControl").value,e=!0),this.basicTimeOptions.get("minutesControl").value!=this.defaultValues.minutesControl&&(this.newItemTime.minutes=this.basicTimeOptions.get("minutesControl").value,e=!0),this.basicTimeOptions.get("userControl").value!=this.defaultValues.userControl&&(this.newItemTime.user_creates_id=this.basicTimeOptions.get("userControl").value,e=!0),e&&this.itemTime.user_updates_id!=parseInt(sessionStorage.id)&&(this.newItemTime.user_updates_id=parseInt(sessionStorage.id)),this._itemTimesService.updateTime(this.newItemTime,this.itemTime.id),this.newItemTime={},this.emitFlagCrearTime.emit(!1)}else this.validation=!1}cancel(){this.emitFlagCrearTime.emit(!1)}_openTimeTypes(e){e&&this._timeTypesService.getTimeTypes().subscribe(e=>this.timeTypes=e)}_openUsers(e){e&&(this.usersFitered=[],this._usersService.getUsers().subscribe(e=>{this.users=e,this._itemResourcesService.getResourcesByItem(this.itemId).subscribe(e=>{if(1==this.role||this.reported_by_id==this.id||this.id==this.lead_id)for(let t=0;t<e.length;t++)this.usersFitered.push(this.users.filter(i=>i.id==e[t].sysuser_id)[0]);else this.usersFitered.push(this.users.filter(e=>e.id==sessionStorage.id)[0])})}))}}return e.\u0275fac=function(t){return new(t||e)(a.Nb(r.e),a.Nb(qe),a.Nb(S.a),a.Nb(Me.a),a.Nb(je),a.Nb(o.e))},e.\u0275cmp=a.Hb({type:e,selectors:[["tecno-item-time-form-basic"]],inputs:{flagCrear:"flagCrear",itemId:"itemId",reported_by_id:"reported_by_id",lead_id:"lead_id",isMultipleResource:"isMultipleResource",flagEditar:"flagEditar",itemTime:"itemTime"},outputs:{emitFlagCrearTime:"emitFlagCrearTime"},decls:47,vars:31,consts:[[1,"general-container"],[3,"formGroup"],["cols","8","rowHeight","60px"],[1,"txt-right",3,"colspan","rowspan"],[1,"field-full","ml-5","mr-5",3,"hideRequiredMarker","floatLabel"],["required","","formControlName","userControl",3,"disabled","openedChange"],[3,"value",4,"ngFor","ngForOf"],["required","","formControlName","TimeTypeControl",3,"openedChange"],[1,"field-full"],["matInput","","formControlName","descriptionControl",3,"keydown.enter"],["matInput","","formControlName","dateControl",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],[1,"example-full-width"],["matInput","","placeholder","Horas","type","number","formControlName","hoursControl",3,"min","max"],["matInput","","placeholder","Minutos","type","number","formControlName","minutesControl",3,"min","max"],["class","txt-right",3,"colspan","rowspan",4,"ngIf"],["mat-button","",3,"click"],[3,"value"],[2,"color","red"]],template:function(e,t){if(1&e&&(a.Tb(0,"div",0),a.Tb(1,"form",1),a.Tb(2,"mat-grid-list",2),a.Tb(3,"mat-grid-tile",3),a.Tb(4,"mat-form-field",4),a.Tb(5,"mat-select",5),a.ac("openedChange",function(e){return t._openUsers(e)}),a.Fc(6,Fe,2,3,"mat-option",6),a.Sb(),a.Tb(7,"mat-label"),a.Hc(8,"Usuario"),a.Sb(),a.Sb(),a.Sb(),a.Tb(9,"mat-grid-tile",3),a.Tb(10,"mat-form-field",4),a.Tb(11,"mat-select",7),a.ac("openedChange",function(e){return t._openTimeTypes(e)}),a.Tb(12,"mat-option"),a.Hc(13,"None"),a.Sb(),a.Fc(14,Ne,2,2,"mat-option",6),a.Sb(),a.Tb(15,"mat-label"),a.Hc(16,"Tipo Tiempo"),a.Sb(),a.Sb(),a.Sb(),a.Tb(17,"mat-grid-tile",3),a.Tb(18,"mat-form-field",8),a.Tb(19,"mat-label"),a.Hc(20,"Descripci\xf3n"),a.Sb(),a.Tb(21,"input",9),a.ac("keydown.enter",function(){return t.crear()}),a.Sb(),a.Sb(),a.Sb(),a.Tb(22,"mat-grid-tile",3),a.Tb(23,"mat-form-field",8),a.Tb(24,"mat-label"),a.Hc(25,"Fecha"),a.Sb(),a.Ob(26,"input",10),a.Ob(27,"mat-datepicker-toggle",11),a.Ob(28,"mat-datepicker",null,12),a.Sb(),a.Sb(),a.Tb(30,"mat-grid-tile",3),a.Tb(31,"mat-form-field",13),a.Tb(32,"mat-label"),a.Hc(33,"Horas"),a.Sb(),a.Ob(34,"input",14),a.Sb(),a.Sb(),a.Tb(35,"mat-grid-tile",3),a.Tb(36,"mat-form-field",13),a.Tb(37,"mat-label"),a.Hc(38,"Minutos"),a.Sb(),a.Ob(39,"input",15),a.Sb(),a.Sb(),a.Fc(40,Ae,4,2,"mat-grid-tile",16),a.Fc(41,Le,4,2,"mat-grid-tile",16),a.Tb(42,"mat-grid-tile",3),a.Tb(43,"button",17),a.ac("click",function(){return t.cancel()}),a.Tb(44,"mat-icon"),a.Hc(45,"close"),a.Sb(),a.Sb(),a.Sb(),a.Fc(46,ze,3,3,"mat-grid-tile",16),a.Sb(),a.Sb(),a.Sb()),2&e){const e=a.rc(29);a.Bb(1),a.kc("formGroup",t.basicTimeOptions),a.Bb(2),a.kc("colspan",2)("rowspan",1),a.Bb(1),a.kc("hideRequiredMarker",t.hideRequiredControl.value)("floatLabel",t.floatLabelControl.value),a.Bb(1),a.kc("disabled",t.habilitado),a.Bb(1),a.kc("ngForOf",t.usersFitered),a.Bb(3),a.kc("colspan",2)("rowspan",1),a.Bb(1),a.kc("hideRequiredMarker",t.hideRequiredControl.value)("floatLabel",t.floatLabelControl.value),a.Bb(4),a.kc("ngForOf",t.timeTypes),a.Bb(3),a.kc("colspan",4)("rowspan",1),a.Bb(5),a.kc("colspan",2)("rowspan",1),a.Bb(4),a.kc("matDatepicker",e),a.Bb(1),a.kc("for",e),a.Bb(3),a.kc("colspan",2)("rowspan",1),a.Bb(4),a.kc("min",0)("max",24),a.Bb(1),a.kc("colspan",2)("rowspan",1),a.Bb(4),a.kc("min",0)("max",59),a.Bb(1),a.kc("ngIf",!t.flagEditar),a.Bb(1),a.kc("ngIf",t.flagEditar),a.Bb(1),a.kc("colspan",1)("rowspan",1),a.Bb(4),a.kc("ngIf",!t.validation)}},directives:[r.u,r.o,r.i,E.a,E.c,M.c,A.a,r.s,r.n,r.g,o.l,M.g,Q.o,q.b,r.c,U.d,U.f,M.h,U.c,r.q,o.m,j.a,F.a],styles:[".general-container[_ngcontent-%COMP%]{margin-top:10px;width:100%}"]}),e})();function Ee(e,t){if(1&e){const e=a.Ub();a.Tb(0,"mat-grid-list",5),a.Tb(1,"mat-grid-tile",6),a.Tb(2,"button",7),a.ac("click",function(){a.uc(e);const t=a.ec();return t.flagCrear=!t.flagCrear}),a.Tb(3,"mat-icon"),a.Hc(4,"add"),a.Sb(),a.Hc(5,"\xa0A\xf1adir Tiempo "),a.Sb(),a.Sb(),a.Sb()}2&e&&(a.Bb(1),a.kc("colspan",12)("rowspan",1))}function Je(e,t){if(1&e){const e=a.Ub();a.Tb(0,"tecno-item-time-form-basic",8),a.ac("emitFlagCrearTime",function(t){return a.uc(e),a.ec().onEmitFlagCrearTime(t)}),a.Sb()}if(2&e){const e=a.ec();a.kc("flagEditar",e.flagEditar)("itemTime",e.itemTime)("isMultipleResource",e.isMultipleResource)("lead_id",e.lead_id)("reported_by_id",e.item.reported_by_id)("itemId",e.item.id)("flagCrear",e.flagCrear)}}function Ue(e,t){1&e&&(a.Tb(0,"span"),a.Hc(1,"0"),a.Sb())}function Xe(e,t){if(1&e){const e=a.Ub();a.Tb(0,"mat-grid-list",9),a.Tb(1,"mat-grid-tile",3),a.Tb(2,"span"),a.Hc(3),a.Sb(),a.Sb(),a.Tb(4,"mat-grid-tile",3),a.Tb(5,"span"),a.Hc(6),a.Sb(),a.Sb(),a.Tb(7,"mat-grid-tile",3),a.Tb(8,"span"),a.Hc(9),a.Sb(),a.Sb(),a.Tb(10,"mat-grid-tile",3),a.Tb(11,"span"),a.Hc(12),a.Sb(),a.Sb(),a.Tb(13,"mat-grid-tile",3),a.Tb(14,"span"),a.Hc(15),a.Sb(),a.Sb(),a.Tb(16,"mat-grid-tile",3),a.Tb(17,"span"),a.Hc(18),a.Sb(),a.Fc(19,Ue,2,0,"span",10),a.Sb(),a.Tb(20,"mat-grid-tile",3),a.Tb(21,"button",7),a.ac("click",function(){a.uc(e);const i=t.$implicit;return a.ec().edit(i)}),a.Tb(22,"mat-icon"),a.Hc(23,"create"),a.Sb(),a.Sb(),a.Sb(),a.Tb(24,"mat-grid-tile",3),a.Tb(25,"button",7),a.ac("click",function(){a.uc(e);const i=t.$implicit;return a.ec().delete(i.id)}),a.Tb(26,"mat-icon"),a.Hc(27,"delete_outline"),a.Sb(),a.Sb(),a.Sb(),a.Ob(28,"mat-divider"),a.Sb()}if(2&e){const e=t.$implicit,i=a.ec();a.Bb(1),a.kc("colspan",2)("rowspan",1),a.Bb(2),a.Ic(i.getNameUser(e.user_creates_id)),a.Bb(1),a.kc("colspan",2)("rowspan",1),a.Bb(2),a.Ic(i.getNameType(e.time_type_id)),a.Bb(1),a.kc("colspan",4)("rowspan",1),a.Bb(2),a.Ic(e.description),a.Bb(1),a.kc("colspan",2)("rowspan",1),a.Bb(2),a.Ic(e.date_work),a.Bb(1),a.kc("colspan",2)("rowspan",1),a.Bb(2),a.Ic(e.hours),a.Bb(1),a.kc("colspan",2)("rowspan",1),a.Bb(2),a.Ic(e.minutes),a.Bb(1),a.kc("ngIf",null==e.minutes||""==e.minutes),a.Bb(1),a.kc("colspan",1)("rowspan",1),a.Bb(4),a.kc("colspan",1)("rowspan",1)}}let Ve=(()=>{class e{constructor(e,t,i){this._itemTimesService=e,this._usersService=t,this._timeTypesService=i,this.itemTimes=[],this.users=[],this.timeTypes=[],this.role=parseInt(sessionStorage.sysrole_id),this.id=parseInt(sessionStorage.id),this.flagCrear=!1,this.flagEditar=!1}ngOnInit(){this.fillItemTimes(),this._timeTypesService.getTimeTypes().subscribe(e=>this.timeTypes=e),this._usersService.getUsers().subscribe(e=>this.users=e),this._itemTimesService.emitAddItemTime.subscribe(e=>{e.item_id==this.item.id&&this.itemTimes.push(e)}),this._itemTimesService.emitEditItemTime.subscribe(e=>{this.fillItemTimes()}),this._itemTimesService.emitDeleteItemTime.subscribe(e=>{this.fillItemTimes()})}onEmitFlagCrearTime(e){this.flagCrear=e,this.flagEditar=!1}getNameUser(e){const t=this.users.filter(t=>t.id==e)[0];if(null!=t)return`${t.firstname} ${t.lastname}`}getNameType(e){const t=this.timeTypes.filter(t=>t.id==e)[0];if(null!=t)return""+t.title}delete(e){this._itemTimesService.deleteTime(e)}cerrar(){this.flagCrear=!1}edit(e){this.flagCrear?this.flagCrear=!1:(this.itemTime=e,this.flagEditar=!0,this.flagCrear=!0)}fillItemTimes(){1==this.role||parseInt(this.item.reported_by_id)==this.id?this._itemTimesService.getTimesByItem(this.item.id).subscribe(e=>this.itemTimes=e):this._itemTimesService.getTimesByItemUser(this.item.id,this.id).subscribe(e=>this.itemTimes=e)}}return e.\u0275fac=function(t){return new(t||e)(a.Nb(qe),a.Nb(S.a),a.Nb(Me.a))},e.\u0275cmp=a.Hb({type:e,selectors:[["tecno-item-time-list"]],inputs:{item:"item",lead_id:"lead_id",isMultipleResource:"isMultipleResource"},decls:30,vars:19,consts:[["cols","12","rowHeight","50px",4,"ngIf"],[3,"flagEditar","itemTime","isMultipleResource","lead_id","reported_by_id","itemId","flagCrear","emitFlagCrearTime",4,"ngIf"],["cols","16","rowHeight","50px",2,"font-weight","bold"],[1,"txt-left",3,"colspan","rowspan"],["cols","16","rowHeight","50px",4,"ngFor","ngForOf"],["cols","12","rowHeight","50px"],[1,"txt-right",3,"colspan","rowspan"],["mat-button","",3,"click"],[3,"flagEditar","itemTime","isMultipleResource","lead_id","reported_by_id","itemId","flagCrear","emitFlagCrearTime"],["cols","16","rowHeight","50px"],[4,"ngIf"]],template:function(e,t){1&e&&(a.Fc(0,Ee,6,2,"mat-grid-list",0),a.Fc(1,Je,1,7,"tecno-item-time-form-basic",1),a.Tb(2,"mat-grid-list",2),a.Tb(3,"mat-grid-tile",3),a.Tb(4,"span"),a.Hc(5,"Usuario"),a.Sb(),a.Sb(),a.Ob(6,"mat-divider"),a.Tb(7,"mat-grid-tile",3),a.Tb(8,"span"),a.Hc(9,"Tipo"),a.Sb(),a.Sb(),a.Tb(10,"mat-grid-tile",3),a.Tb(11,"span"),a.Hc(12,"Descripci\xf3n"),a.Sb(),a.Sb(),a.Tb(13,"mat-grid-tile",3),a.Tb(14,"span"),a.Hc(15,"Fecha"),a.Sb(),a.Sb(),a.Tb(16,"mat-grid-tile",3),a.Tb(17,"span"),a.Hc(18,"Horas"),a.Sb(),a.Sb(),a.Tb(19,"mat-grid-tile",3),a.Tb(20,"span"),a.Hc(21,"Minutos"),a.Sb(),a.Sb(),a.Tb(22,"mat-grid-tile",3),a.Tb(23,"span"),a.Hc(24,"Editar"),a.Sb(),a.Sb(),a.Tb(25,"mat-grid-tile",3),a.Tb(26,"span"),a.Hc(27,"Eliminar"),a.Sb(),a.Sb(),a.Ob(28,"mat-divider"),a.Sb(),a.Fc(29,Xe,29,23,"mat-grid-list",4)),2&e&&(a.kc("ngIf",!t.flagCrear),a.Bb(1),a.kc("ngIf",t.flagCrear),a.Bb(2),a.kc("colspan",2)("rowspan",1),a.Bb(4),a.kc("colspan",2)("rowspan",1),a.Bb(3),a.kc("colspan",4)("rowspan",1),a.Bb(3),a.kc("colspan",2)("rowspan",1),a.Bb(3),a.kc("colspan",2)("rowspan",1),a.Bb(3),a.kc("colspan",2)("rowspan",1),a.Bb(3),a.kc("colspan",1)("rowspan",1),a.Bb(3),a.kc("colspan",1)("rowspan",1),a.Bb(4),a.kc("ngForOf",t.itemTimes))},directives:[o.m,E.a,E.c,X.a,o.l,j.a,F.a,$e],styles:[""]}),e})();var Ge=i("JX91"),Ke=i("lJxs"),Qe=i("XyAq");function We(e,t){if(1&e&&(a.Tb(0,"mat-option",11),a.Hc(1),a.Sb()),2&e){const e=t.$implicit;a.kc("value",e.id),a.Bb(1),a.Kc("",e.firstname," ",e.lastname,"")}}function Ze(e,t){if(1&e&&a.Ob(0,"tecno-perfil-circle",15),2&e){const e=a.ec().$implicit,t=a.ec();a.kc("user",t.getUser(e.sysuser_id))}}function Ye(e,t){if(1&e){const e=a.Ub();a.Tb(0,"mat-grid-list",7),a.Tb(1,"mat-grid-tile",8),a.Fc(2,Ze,1,1,"tecno-perfil-circle",12),a.Tb(3,"span"),a.Hc(4),a.Sb(),a.Sb(),a.Tb(5,"mat-grid-tile",8),a.Tb(6,"span",13),a.Hc(7),a.Sb(),a.Sb(),a.Tb(8,"mat-grid-tile",8),a.Tb(9,"span",13),a.Hc(10),a.Sb(),a.Sb(),a.Tb(11,"mat-grid-tile",8),a.Tb(12,"button",14),a.ac("click",function(){a.uc(e);const i=t.$implicit;return a.ec().deleteResource(i.id)}),a.Tb(13,"mat-icon"),a.Hc(14,"person_remove"),a.Sb(),a.Sb(),a.Sb(),a.Ob(15,"mat-divider"),a.Sb()}if(2&e){const e=t.$implicit,r=a.ec();var i,o,s=null;a.Bb(1),a.kc("colspan",6)("rowspan",1),a.Bb(1),a.kc("ngIf",r.getUser(e.sysuser_id)),a.Bb(2),a.Kc("",null==(s=r.getUser(e.sysuser_id))?null:s.firstname," ",null==(s=r.getUser(e.sysuser_id))?null:s.lastname,""),a.Bb(1),a.kc("colspan",2)("rowspan",1),a.Bb(2),a.Jc("",null==(i=r.getUser(e.sysuser_id))?null:i.login_name," "),a.Bb(1),a.kc("colspan",2)("rowspan",1),a.Bb(2),a.Ic(null==(o=r.getUser(e.sysuser_id))?null:o.email),a.Bb(1),a.kc("colspan",1)("rowspan",1)}}let et=(()=>{class e{constructor(e,t,i){this.fb=e,this._itemResourcesService=t,this._usersService=i,this.elegido={},this.users=[],this.resources=[],this.hideRequiredControl=new r.f(!1),this.floatLabelControl=new r.f("auto"),this.options=[],this.deshabilitado=!0}ngOnInit(){this.resourceOptions=this.fb.group({hideRequired:this.hideRequiredControl,floatLabel:this.floatLabelControl,resourceControl:[]}),this.filteredOptions=this.resourceOptions.get("resourceControl").valueChanges.pipe(Object(Ge.a)(""),Object(Ke.a)(e=>this._filter(e))),this._itemResourcesService.getResourcesByItem(this.item.id).subscribe(e=>{this.resources=e,this.deshabilitar()}),this._usersService.getUsers().subscribe(e=>{this.users=e,this.options=this.getFilteredUsers()}),this._itemResourcesService.emitDeleteResource.subscribe(e=>{this._itemResourcesService.getResourcesByItem(this.item.id).subscribe(e=>{this.resources=e,this.deshabilitar()})}),this._itemResourcesService.emitAddResource.subscribe(e=>{this.resources.push(e),this.deshabilitar()})}getUser(e){return this.users.filter(t=>t.id==e)[0]}getFilteredUsers(){var e=this.users;for(let t=0;t<this.resources.length;t++)e=e.filter(e=>e.id!=this.resources[t].sysuser_id);return e}deleteResource(e){this._itemResourcesService.deleteResource(e)}addResource(){var e={item_id:this.item.id,sysuser_id:this.resourceOptions.get("resourceControl").value,is_active:!0,user_creates_id:sessionStorage.id,user_updates_id:sessionStorage.id};this._itemResourcesService.addResource(e),this.resourceOptions.get("resourceControl").setValue("")}_openUsers(e){e&&(this.options=this.getFilteredUsers())}deshabilitar(){this.deshabilitado=this.resources.length>=1&&!this.project.is_multiple_resources}_filter(e){const t=e.toLowerCase();var i=this.options;return i=i.filter(e=>`${e.firstname}${e.lastname}`.toLowerCase().includes(t)),this.elegido=i[0],i}}return e.\u0275fac=function(t){return new(t||e)(a.Nb(r.e),a.Nb(je),a.Nb(S.a))},e.\u0275cmp=a.Hb({type:e,selectors:[["tecno-item-resources"]],inputs:{item:"item",project:"project"},decls:25,vars:19,consts:[["cols","6","rowHeight","100px"],[3,"colspan","rowspan"],[2,"width","80%",3,"formGroup"],[1,"field-full","ml-5","mr-5",2,"width","100%",3,"hideRequiredMarker","floatLabel"],["required","","formControlName","resourceControl",3,"disabled","openedChange"],[3,"value",4,"ngFor","ngForOf"],["mat-button","",2,"width","100%",3,"disabled","click"],["cols","11","rowHeight","50px"],[1,"txt-left",3,"colspan","rowspan"],[2,"color","#666","font-weight","bolder"],["cols","11","rowHeight","50px",4,"ngFor","ngForOf"],[3,"value"],[3,"user",4,"ngIf"],[2,"color","#666"],["mat-button","",3,"click"],[3,"user"]],template:function(e,t){1&e&&(a.Tb(0,"mat-grid-list",0),a.Tb(1,"mat-grid-tile",1),a.Tb(2,"form",2),a.Tb(3,"mat-form-field",3),a.Tb(4,"mat-select",4),a.ac("openedChange",function(e){return t._openUsers(e)}),a.Fc(5,We,2,3,"mat-option",5),a.Sb(),a.Tb(6,"mat-label"),a.Hc(7,"Recurso"),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Tb(8,"mat-grid-tile",1),a.Tb(9,"button",6),a.ac("click",function(){return t.addResource()}),a.Tb(10,"mat-icon"),a.Hc(11,"person_add"),a.Sb(),a.Hc(12,"\xa0A\xf1adir Recurso "),a.Sb(),a.Sb(),a.Sb(),a.Tb(13,"mat-grid-list",7),a.Tb(14,"mat-grid-tile",8),a.Tb(15,"span",9),a.Hc(16,"Recurso "),a.Sb(),a.Sb(),a.Tb(17,"mat-grid-tile",8),a.Ob(18,"span"),a.Sb(),a.Tb(19,"mat-grid-tile",8),a.Tb(20,"span",9),a.Hc(21,"Email"),a.Sb(),a.Sb(),a.Ob(22,"mat-grid-tile",8),a.Ob(23,"mat-divider"),a.Sb(),a.Fc(24,Ye,16,13,"mat-grid-list",10)),2&e&&(a.Bb(1),a.kc("colspan",5)("rowspan",1),a.Bb(1),a.kc("formGroup",t.resourceOptions),a.Bb(1),a.kc("hideRequiredMarker",t.hideRequiredControl.value)("floatLabel",t.floatLabelControl.value),a.Bb(1),a.kc("disabled",t.deshabilitado),a.Bb(1),a.kc("ngForOf",t.options),a.Bb(3),a.kc("colspan",1)("rowspan",1),a.Bb(1),a.kc("disabled",t.deshabilitado),a.Bb(5),a.kc("colspan",6)("rowspan",1),a.Bb(3),a.kc("colspan",2)("rowspan",1),a.Bb(2),a.kc("colspan",2)("rowspan",1),a.Bb(3),a.kc("colspan",1)("rowspan",1),a.Bb(2),a.kc("ngForOf",t.resources))},directives:[E.a,E.c,r.u,r.o,r.i,M.c,A.a,r.s,r.n,r.g,o.l,M.g,j.a,F.a,X.a,Q.o,o.m,Qe.a],styles:["mat-divider[_ngcontent-%COMP%]{width:100%;border-width:1px}"]}),e})();function tt(e,t){if(1&e){const e=a.Ub();a.Tb(0,"mat-tab",13),a.Tb(1,"div",14),a.Tb(2,"button",15),a.ac("click",function(){a.uc(e);const t=a.ec(2).$implicit;return a.ec().onDeleteItem(t.id)}),a.Hc(3,"Eliminar"),a.Sb(),a.Sb(),a.Tb(4,"div",11),a.Ob(5,"tecno-items-form",16),a.Sb(),a.Sb()}if(2&e){const e=a.ec(2).$implicit,t=a.ec();a.Bb(5),a.kc("item",e)("labelAction",t.labelAction)("project",t.project)("mode","modify")("showBtnClose",!1)}}function it(e,t){if(1&e&&(a.Tb(0,"mat-tab",17),a.Tb(1,"div",11),a.Ob(2,"tecno-item-resources",12),a.Sb(),a.Sb()),2&e){const e=a.ec(2).$implicit,t=a.ec();a.Bb(2),a.kc("project",t.project)("item",e)}}function ot(e,t){if(1&e&&(a.Tb(0,"mat-tab-group"),a.Fc(1,tt,6,5,"mat-tab",8),a.Fc(2,it,3,2,"mat-tab",9),a.Tb(3,"mat-tab",10),a.Tb(4,"div",11),a.Ob(5,"tecno-item-time-list",12),a.Sb(),a.Sb(),a.Sb()),2&e){const e=a.ec().$implicit,t=a.ec();a.Bb(1),a.kc("ngIf",t.getAutorization(e.id)),a.Bb(1),a.kc("ngIf",t.getAutorization(e.id)),a.Bb(3),a.kc("project",t.project)("item",e)}}function st(e,t){if(1&e&&(a.Tb(0,"mat-expansion-panel",4),a.Tb(1,"mat-expansion-panel-header"),a.Tb(2,"mat-panel-title"),a.Tb(3,"span",5),a.Hc(4),a.Sb(),a.Tb(5,"span"),a.Hc(6),a.Sb(),a.Sb(),a.Tb(7,"mat-panel-description"),a.Tb(8,"span",6),a.Hc(9,"Horas Trabajadas: "),a.Tb(10,"b"),a.Hc(11),a.Sb(),a.Sb(),a.Tb(12,"span",6),a.Hc(13,"Horas Estimadas: "),a.Tb(14,"b"),a.Hc(15),a.Sb(),a.Sb(),a.Tb(16,"mat-icon"),a.Hc(17),a.Sb(),a.Sb(),a.Sb(),a.Fc(18,ot,6,4,"ng-template",7),a.Sb()),2&e){const e=t.$implicit,i=a.ec();a.Bb(4),a.Jc("",e.id," "),a.Bb(2),a.Ic(e.title),a.Bb(5),a.Kc("",e.worked_time.hours,"h ",e.worked_time.minutes,"m"),a.Bb(4),a.Kc("",e.estimated_time.hours,"h ",e.estimated_time.minutes,"m"),a.Bb(1),a.Eb("txt-",i.getColor(e.item_type_id),""),a.Bb(1),a.Ic(i.getIcon(e.item_type_id))}}let rt=(()=>{class e{constructor(e,t,i,o,s){this._itemsService=e,this._projectsService=t,this._itemsIndicatorsService=i,this._snackBar=o,this.route=s,this.numberRequest=-1,this.itemsProject=[],this.itemTypes=[],this.icons=[],this.i=0,this.role=parseInt(sessionStorage.sysrole_id),this.id=parseInt(sessionStorage.id),this.developer_company_id=null}ngOnInit(){console.log(this.project),this.developer_company_id=this.route.snapshot.params.developer_company_id,console.log("=============================>>>>>>>>>>>>>>>> this.developer_company_id: ",this.developer_company_id),this.route.data.subscribe(e=>{this.icons=e.icons,this.itemTypes=e.itemTypes}),this.fillItems(),this._itemsService.emitModifyItem.subscribe(e=>{this.fillItems(),this.openSnackBar(!0,e.id+" Requerimiento Modificado","Aceptar")}),this._itemsService.emitDeleteItem.subscribe(e=>{200==e?this.openSnackBar(!0,e.id+" Requerimiento Eliminado","Aceptar"):409==e&&this.openSnackBar(!1,"Conflicto","Aceptar")}),this._itemsService.emitAddItem.subscribe(e=>{this.fillItems(),this.openSnackBar(!0,e.id+" Requerimiento Creado","Aceptar")}),this.labelAction="Editar"}onDeleteItem(e){this._itemsService.deleteItem(e)}getAutorization(e){let t=this.itemsProject.filter(t=>t.id==e)[0];return 1==this.role||t.reported_by_id==this.id||this.project.lead_id==this.id}getColor(e){return this.itemTypes.filter(t=>t.id==e)[0].color}getIcon(e){var t=this.itemTypes.filter(t=>t.id==e)[0].icon_id;return this.icons.filter(e=>e.id==t)[0].title}fillItems(){null==this.mode||0==this.mode?this._itemsService.getItemsByProjectId(this.project.id,this.developer_company_id).subscribe(e=>{this.itemsProject=e,this.totalItems=this.itemsProject.length}):this._projectsService.getItemsProject(parseInt(this.project.id),this.developer_company_id).subscribe(e=>{e=e[0].indicators,0==this.mode?(this.itemsProject=e[0].data,this.totalItems=e[0].items_to_expire_count):1==this.mode?(this.itemsProject=e[1].data,this.totalItems=e[1].items_expired_count):2==this.mode?(this.itemsProject=e[2].data,this.totalItems=e[2].items_anticipated_count):3==this.mode?(this.itemsProject=e[3].data,this.totalItems=e[3].items_ontime_count):4==this.mode?(this.itemsProject=e[4].data,this.totalItems=e[4].items_no_time_count):5==this.mode?(this.itemsProject=e[5].data,this.totalItems=e[5].items_develop_count):6==this.mode&&(this.itemsProject=e[6].data,this.totalItems=e[6].items_late_count)})}openSnackBar(e,t,i){var o="succes-snack-bar";e||(o="error-snack-bar"),this._snackBar.open(t,i,{duration:5e3,panelClass:o})}onExpand(e){this.numberRequest=e}}return e.\u0275fac=function(t){return new(t||e)(a.Nb(se.a),a.Nb(u.a),a.Nb(Re.a),a.Nb(W.a),a.Nb(s.a))},e.\u0275cmp=a.Hb({type:e,selectors:[["tecno-items-list"]],inputs:{project:"project",mode:"mode"},decls:7,vars:3,consts:[["aria-label","Totales requerimientos",1,"d-block","mb-10"],["color","accent","value","3",3,"selected"],[1,"example-headers-align"],["class","animate__animated animate__backInLeft",4,"ngFor","ngForOf"],[1,"animate__animated","animate__backInLeft"],[1,"mr-15","mat-body-2"],[1,"mat-caption"],["matExpansionPanelContent",""],["label","Modificar",4,"ngIf"],["label","Recursos",4,"ngIf"],["label","Tiempos"],[1,"example-container","bg-color-white"],[3,"project","item"],["label","Modificar"],[1,"example-button-row","mb-20",2,"padding-top","20px"],["mat-raised-button","","color","warn",3,"click"],[3,"item","labelAction","project","mode","showBtnClose"],["label","Recursos"]],template:function(e,t){1&e&&(a.Tb(0,"mat-chip-list",0),a.Tb(1,"mat-chip",1),a.Tb(2,"strong"),a.Hc(3,"Total requerimientos: "),a.Sb(),a.Hc(4),a.Sb(),a.Sb(),a.Tb(5,"mat-accordion",2),a.Fc(6,st,19,10,"mat-expansion-panel",3),a.Sb()),2&e&&(a.Bb(1),a.kc("selected",t.totalItems>0),a.Bb(3),a.Jc("\xa0",t.totalItems,""),a.Bb(2),a.kc("ngForOf",t.itemsProject))},directives:[G.b,G.a,J.a,o.l,J.c,J.g,J.h,J.f,F.a,J.e,V.b,o.m,V.a,Ve,j.a,Oe,et],styles:[".cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box[_ngcontent-%COMP%]:last-child{border:none}.example-custom-placeholder[_ngcontent-%COMP%], .example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.example-custom-placeholder[_ngcontent-%COMP%]{background:#ccc;border:3px dotted #999;min-height:60px}.items-content[_ngcontent-%COMP%]{padding:20px;background-color:#eee;border-radius:10px}.example-action-buttons[_ngcontent-%COMP%]{padding-bottom:20px}.example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%], .example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-title[_ngcontent-%COMP%]{flex-basis:0}.example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%]{justify-content:space-between;align-items:center}.example-headers-align[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%] + .mat-form-field[_ngcontent-%COMP%]{margin-left:8px}.mat-expansion-panel-header-description[_ngcontent-%COMP%]{flex-grow:1}"]}),e})();function at(e,t){if(1&e){const e=a.Ub();a.Tb(0,"mat-expansion-panel",4),a.Tb(1,"mat-expansion-panel-header"),a.Tb(2,"mat-panel-title"),a.Hc(3),a.Sb(),a.Tb(4,"mat-panel-description"),a.Ob(5,"span"),a.Tb(6,"mat-icon",5),a.Hc(7),a.Sb(),a.Sb(),a.Sb(),a.Tb(8,"div",6),a.Tb(9,"button",7),a.ac("click",function(){a.uc(e);const i=t.$implicit;return a.ec().onDeleteItem(i.id)}),a.Hc(10,"Eliminar"),a.Sb(),a.Sb(),a.Tb(11,"div",8),a.Ob(12,"tecno-items-form",9),a.Sb(),a.Sb()}if(2&e){const e=t.$implicit,i=a.ec();a.Bb(3),a.Jc(" ",e.title," "),a.Bb(3),a.Eb("txt-",e.item_type.color,""),a.Bb(1),a.Ic(e.iconName),a.Bb(5),a.kc("item",e)("labelAction",i.labelAction)("project",i.project)("mode","tempToItem")("showBtnClose",!1)}}let nt=(()=>{class e{constructor(e,t,i,o){this._itemsService=e,this._temporalItemsService=t,this._iconsService=i,this.route=o,this.temporalItems=[],this.itemsProject=[],this.icons=[],this.i=0}ngOnInit(){this.route.data.subscribe(e=>{this.icons=e.icons,console.log("Entra a Icons",e),this.temporalItems=e.project_items,this.totalItems=this.temporalItems.length;for(let t=0;t<this.temporalItems.length;t++)this.temporalItems[t].iconName=this.icons.filter(e=>e.id==this.temporalItems[t].item_type.icon_id)[0].title,this.temporalItems[t].item_type_id=this.temporalItems[t].item_type.id}),this._temporalItemsService.emitAddTemporalItem.subscribe(e=>{e.iconName=this.icons.filter(t=>t.id==e.item_type.icon_id)[0].title,e.item_type_id=e.item_type.id,this.temporalItems.push(e),this.totalItems=this.temporalItems.length}),this._itemsService.emitCreateFormTemp.subscribe(e=>{this._iconsService.getIcons().subscribe(e=>{this.icons=e,this._temporalItemsService.getTemporalItemsByProjectId(this.project.id).subscribe(e=>{this.temporalItems=e,this.totalItems=this.temporalItems.length;for(let t=0;t<this.temporalItems.length;t++)this.temporalItems[t].iconName=this.icons.filter(e=>e.id==this.temporalItems[t].item_type.icon_id)[0].title,this.temporalItems[t].item_type_id=this.temporalItems[t].item_type.id})})}),this._temporalItemsService.emitDeleteTemporalItem.subscribe(e=>{this._iconsService.getIcons().subscribe(e=>{this.icons=e,this._temporalItemsService.getTemporalItemsByProjectId(this.project.id).subscribe(e=>{this.temporalItems=e,this.totalItems=this.temporalItems.length;for(let t=0;t<this.temporalItems.length;t++)this.temporalItems[t].iconName=this.icons.filter(e=>e.id==this.temporalItems[t].item_type.icon_id)[0].title,this.temporalItems[t].item_type_id=this.temporalItems[t].item_type.id})})}),this.labelAction="Editar"}drop(e){Object(Y.c)(this.itemsProject,e.previousIndex,e.currentIndex)}onDeleteItem(e){this._temporalItemsService.deleteTemporalItem(e)}}return e.\u0275fac=function(t){return new(t||e)(a.Nb(se.a),a.Nb(x),a.Nb(re.a),a.Nb(s.a))},e.\u0275cmp=a.Hb({type:e,selectors:[["tecno-temporal-item-list"]],inputs:{project:"project"},decls:7,vars:3,consts:[["aria-label","Totales requerimientos",1,"d-block","mb-10"],["color","accent",3,"selected"],[1,"example-headers-align"],["cdkDrag","","class","animate__animated animate__backInLeft",4,"ngFor","ngForOf"],["cdkDrag","",1,"animate__animated","animate__backInLeft"],[1,"mr-20"],[1,"example-button-row","mb-20"],["mat-raised-button","","color","warn",3,"click"],[1,"example-container","bg-color-white"],[3,"item","labelAction","project","mode","showBtnClose"]],template:function(e,t){1&e&&(a.Tb(0,"mat-chip-list",0),a.Tb(1,"mat-chip",1),a.Tb(2,"strong"),a.Hc(3,"Total requerimientos temporales: "),a.Sb(),a.Hc(4),a.Sb(),a.Sb(),a.Tb(5,"mat-accordion",2),a.Fc(6,at,13,10,"mat-expansion-panel",3),a.Sb()),2&e&&(a.Bb(1),a.kc("selected",t.totalItems>0),a.Bb(3),a.Jc("\xa0",t.totalItems,""),a.Bb(2),a.kc("ngForOf",t.temporalItems))},directives:[G.b,G.a,J.a,o.l,J.c,Y.a,J.g,J.h,J.f,F.a,j.a,Oe],styles:[".cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box[_ngcontent-%COMP%]:last-child{border:none}.example-custom-placeholder[_ngcontent-%COMP%], .example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.example-custom-placeholder[_ngcontent-%COMP%]{background:#ccc;border:3px dotted #999;min-height:60px}.items-content[_ngcontent-%COMP%]{padding:20px;background-color:#eee;border-radius:10px}.example-action-buttons[_ngcontent-%COMP%]{padding-bottom:20px}.example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%], .example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-title[_ngcontent-%COMP%]{flex-basis:0}.example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%]{justify-content:space-between;align-items:center}.example-headers-align[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%] + .mat-form-field[_ngcontent-%COMP%]{margin-left:8px}.mat-expansion-panel-header-description[_ngcontent-%COMP%]{flex-grow:0}"]}),e})();function ct(e,t){if(1&e){const e=a.Ub();a.Tb(0,"mat-grid-list",10),a.Tb(1,"mat-grid-tile",11),a.Tb(2,"button",12),a.ac("click",function(){a.uc(e);const t=a.ec();return t.flagCrear=!t.flagCrear}),a.Tb(3,"mat-icon"),a.Hc(4,"add"),a.Sb(),a.Hc(5,"\xa0Crear requerimiento "),a.Sb(),a.Sb(),a.Sb()}2&e&&(a.Bb(1),a.kc("colspan",12)("rowspan",1))}function lt(e,t){1&e&&(a.Tb(0,"th",26),a.Hc(1," ID "),a.Sb())}function mt(e,t){if(1&e&&(a.Tb(0,"td",27),a.Hc(1),a.Sb()),2&e){const e=t.$implicit;a.Bb(1),a.Jc(" ",e.id," ")}}function bt(e,t){1&e&&(a.Tb(0,"th",26),a.Hc(1," Progress "),a.Sb())}function pt(e,t){if(1&e&&(a.Tb(0,"td",27),a.Hc(1),a.Sb()),2&e){const e=t.$implicit;a.Bb(1),a.Jc(" ",e.progress,"% ")}}function dt(e,t){1&e&&(a.Tb(0,"th",26),a.Hc(1," Name "),a.Sb())}function ut(e,t){if(1&e&&(a.Tb(0,"td",27),a.Hc(1),a.Sb()),2&e){const e=t.$implicit;a.Bb(1),a.Jc(" ",e.name," ")}}function ht(e,t){1&e&&(a.Tb(0,"th",26),a.Hc(1," Color "),a.Sb())}function ft(e,t){if(1&e&&(a.Tb(0,"td",27),a.Hc(1),a.Sb()),2&e){const e=t.$implicit;a.Cc("color",e.color),a.Bb(1),a.Jc(" ",e.color," ")}}function gt(e,t){1&e&&a.Ob(0,"tr",28)}function Tt(e,t){1&e&&a.Ob(0,"tr",29)}function St(e,t){if(1&e&&(a.Tb(0,"tr",30),a.Tb(1,"td",31),a.Hc(2),a.Sb(),a.Sb()),2&e){a.ec(2);const e=a.rc(13);a.Bb(2),a.Jc('No data matching the filter "',e.value,'"')}}const vt=function(){return[5,10,25,100]};function _t(e,t){if(1&e&&(a.Tb(0,"div",13),a.Tb(1,"table",14),a.Rb(2,15),a.Fc(3,lt,2,0,"th",16),a.Fc(4,mt,2,1,"td",17),a.Qb(),a.Rb(5,18),a.Fc(6,bt,2,0,"th",16),a.Fc(7,pt,2,1,"td",17),a.Qb(),a.Rb(8,19),a.Fc(9,dt,2,0,"th",16),a.Fc(10,ut,2,1,"td",17),a.Qb(),a.Rb(11,20),a.Fc(12,ht,2,0,"th",16),a.Fc(13,ft,2,3,"td",21),a.Qb(),a.Fc(14,gt,1,0,"tr",22),a.Fc(15,Tt,1,0,"tr",23),a.Fc(16,St,3,1,"tr",24),a.Sb(),a.Ob(17,"mat-paginator",25),a.Sb()),2&e){const e=a.ec();a.Bb(1),a.kc("dataSource",e.dataSource),a.Bb(13),a.kc("matHeaderRowDef",e.displayedColumns),a.Bb(1),a.kc("matRowDefColumns",e.displayedColumns),a.Bb(2),a.kc("pageSize",10)("pageSizeOptions",a.mc(5,vt))}}const Ct=["maroon","red","orange","yellow","olive","green","purple","fuchsia","lime","teal","aqua","blue","navy","black","gray"],It=["Maia","Asher","Olivia","Atticus","Amelia","Jack","Charlotte","Theodore","Isla","Oliver","Isabella","Jasper","Cora","Levi","Violet","Arthur","Mia","Thomas","Elizabeth"];let kt=(()=>{class e{constructor(e,t,i,o,s,a){this._projectsService=e,this.itemsService=t,this.route=i,this.dialog=o,this.router=s,this.hideRequiredControl=new r.f(!1),this.floatLabelControl=new r.f("auto"),this.flagCrear=!1,this.displayedColumns=["id","name","progress","color"],this.selectItemTypes=new r.f,this.mode=this.route.snapshot.params.mode,this.options=a.group({hideRequired:this.hideRequiredControl,floatLabel:this.floatLabelControl});const n=Array.from({length:100},(e,t)=>function(e){const t=It[Math.round(Math.random()*(It.length-1))]+" "+It[Math.round(Math.random()*(It.length-1))].charAt(0)+".";return{id:e.toString(),name:t,progress:Math.round(100*Math.random()).toString(),color:Ct[Math.round(Math.random()*(Ct.length-1))]}}(t+1));this.dataSource=new P.p(n)}ngOnInit(){this.setModeLabel(),this.route.data.subscribe(e=>{this.project=e.project,this.projectId=this.project.id,this.icons=e.icons})}search(e){}onEmitFlagCrear(e){this.flagCrear=e}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}onBack(){this.router.navigate(["/home",this.projectId])}openDialog(){const e=this.dialog.open(Oe,{width:"80%",disableClose:!0});let t=e.componentInstance;t.mode="create",t.project=this.project,t.icons=this.icons,t.item=new xe,t.dialogRef=e,e.afterClosed().subscribe(e=>{console.log("Dialog result: "+e)})}setModeLabel(){null==this.mode?this.modeLabel="Todos":0==this.mode?this.modeLabel="A vencer":1==this.mode?this.modeLabel="Vencidos":2==this.mode?this.modeLabel="Anticipados":3==this.mode?this.modeLabel="On Time":4==this.mode?this.modeLabel="Sin Tiempo":5==this.mode?this.modeLabel="En Desarrollo":6==this.mode&&(this.modeLabel="Tard\xedo")}}return e.\u0275fac=function(t){return new(t||e)(a.Nb(u.a),a.Nb(se.a),a.Nb(s.a),a.Nb(N.a),a.Nb(s.b),a.Nb(r.e))},e.\u0275cmp=a.Hb({type:e,selectors:[["tecno-items"]],viewQuery:function(e,t){var i;1&e&&(a.Lc(H.a,!0),a.Lc(R.a,!0),a.Lc(J.a,!0)),2&e&&(a.qc(i=a.bc())&&(t.paginator=i.first),a.qc(i=a.bc())&&(t.sort=i.first),a.qc(i=a.bc())&&(t.accordion=i.first))},decls:24,vars:9,consts:[["mat-button","","aria-label","Regresar a home",3,"click"],["matInput","","placeholder","Ingrese el requerimiento a buscar",3,"keyup"],["input",""],[1,"items-content"],["cols","12","rowHeight","50px",4,"ngIf"],[3,"flagCrear","projectId","emitFlagCrear"],[3,"project","mode"],[3,"project"],["class","mat-elevation-z8 table-container",4,"ngIf"],["mat-fab","","color","accent","aria-label","Nuevo registro",1,"btn-new","mat-elevation-z2",3,"click"],["cols","12","rowHeight","50px"],[1,"txt-right",3,"colspan","rowspan"],["mat-button","",3,"click"],[1,"mat-elevation-z8","table-container"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","progress"],["matColumnDef","name"],["matColumnDef","color"],["mat-cell","",3,"color",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"pageSize","pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(e,t){1&e&&(a.Tb(0,"h2"),a.Hc(1),a.Sb(),a.Tb(2,"h1"),a.Hc(3),a.Sb(),a.Tb(4,"button",0),a.ac("click",function(){return t.onBack()}),a.Tb(5,"mat-icon"),a.Hc(6,"arrow_back"),a.Sb(),a.Hc(7,"\xa0Volver\n"),a.Sb(),a.Ob(8,"br"),a.Tb(9,"mat-form-field"),a.Tb(10,"mat-label"),a.Hc(11,"Buscar"),a.Sb(),a.Tb(12,"input",1,2),a.ac("keyup",function(e){return t.applyFilter(e)}),a.Sb(),a.Sb(),a.Tb(14,"div",3),a.Fc(15,ct,6,2,"mat-grid-list",4),a.Tb(16,"tecno-items-form-basic",5),a.ac("emitFlagCrear",function(e){return t.onEmitFlagCrear(e)}),a.Sb(),a.Ob(17,"tecno-items-list",6),a.Ob(18,"mat-divider"),a.Ob(19,"tecno-temporal-item-list",7),a.Sb(),a.Fc(20,_t,18,6,"div",8),a.Tb(21,"button",9),a.ac("click",function(){return t.openDialog()}),a.Tb(22,"mat-icon"),a.Hc(23,"add"),a.Sb(),a.Sb()),2&e&&(a.Bb(1),a.Jc("Proyectos / ",t.project.title,""),a.Bb(2),a.Jc("Requerimientos / ",t.modeLabel,""),a.Bb(12),a.kc("ngIf",!t.flagCrear),a.Bb(1),a.kc("flagCrear",t.flagCrear)("projectId",t.projectId),a.Bb(1),a.kc("project",t.project)("mode",t.mode),a.Bb(2),a.kc("project",t.project),a.Bb(1),a.kc("ngIf",!1))},directives:[j.a,F.a,M.c,M.g,q.b,o.m,He,rt,X.a,nt,E.a,E.c,P.o,R.a,P.c,P.i,P.b,P.k,P.n,P.l,H.a,P.h,R.b,P.a,P.j,P.m],styles:["mat-divider[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:20px;width:100%;border-width:1px}table[_ngcontent-%COMP%]{width:100%}.mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:50%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:25%}.table-container[_ngcontent-%COMP%]{margin-bottom:40px}.example-list[_ngcontent-%COMP%]{width:100%;max-width:100%;border:1px solid #ccc;min-height:60px;display:block;background:#fff;border-radius:4px;overflow:hidden}.example-box[_ngcontent-%COMP%]{padding:20px 10px;border-bottom:1px solid #ccc;color:rgba(0,0,0,.87);display:flex;flex-direction:row;align-items:center;justify-content:space-between;box-sizing:border-box;cursor:move;background:#fff;font-size:14px}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box[_ngcontent-%COMP%]:last-child{border:none}.example-custom-placeholder[_ngcontent-%COMP%], .example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.example-custom-placeholder[_ngcontent-%COMP%]{background:#ccc;border:3px dotted #999;min-height:60px}.items-content[_ngcontent-%COMP%]{padding:20px;background-color:#eee;border-radius:10px}.example-action-buttons[_ngcontent-%COMP%]{padding-bottom:20px}.example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%], .example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-title[_ngcontent-%COMP%]{flex-basis:0}.example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%]{justify-content:space-between;align-items:center}.example-headers-align[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%] + .mat-form-field[_ngcontent-%COMP%]{margin-left:8px}"]}),e})();var yt=i("NRda");const wt=[{path:"",component:kt,resolve:{sponsorsCompanies:f,components:w,developersCompanies:c,icons:yt.a,itemTypes:O,project:h,project_items:D,itemPriorities:d,itemResolutions:C,itemSeverities:k,itemStatus:T,users:v}},{path:":id",component:kt,resolve:{sponsorsCompanies:f,components:w,developersCompanies:c,icons:yt.a,itemTypes:O,project:h,project_items:D,itemPriorities:d,itemResolutions:C,itemSeverities:k,itemStatus:T,users:v}},{path:":id/:mode",component:kt,resolve:{sponsorsCompanies:f,components:w,developersCompanies:c,icons:yt.a,itemTypes:O,project:h,project_items:D,itemPriorities:d,itemResolutions:C,itemSeverities:k,itemStatus:T,users:v}},{path:":id/:mode/:developer_company_id",component:kt,resolve:{sponsorsCompanies:f,components:w,developersCompanies:c,icons:yt.a,itemTypes:O,project:h,project_items:D,itemPriorities:d,itemResolutions:C,itemSeverities:k,itemStatus:T,users:v}},{path:"new",component:Oe}];let Bt=(()=>{class e{}return e.\u0275mod=a.Lb({type:e}),e.\u0275inj=a.Kb({factory:function(t){return new(t||e)},providers:[yt.a],imports:[[s.e.forChild(wt)],s.e]}),e})();const Ot=[R.c,P.q,H.b,q.c,M.e,j.b,N.e,A.b,L.a,z.b,$.b,E.b,J.b,U.e,K.b,X.b,V.c,Q.n,ee.c,te.a,W.b,F.b,oe.e,Z.c,G.c];let xt=(()=>{class e{}return e.\u0275mod=a.Lb({type:e}),e.\u0275inj=a.Kb({factory:function(t){return new(t||e)},providers:[{provide:N.f,useValue:{}},f,w,o.e,c,d,C,k,T,O,ee.c,D,h,v],imports:[[o.c,s.e,r.r,Ot,Y.b,N.e,ie.a,Bt],R.c,P.q,H.b,q.c,M.e,j.b,N.e,A.b,L.a,z.b,$.b,E.b,J.b,U.e,K.b,X.b,V.c,Q.n,ee.c,te.a,W.b,F.b,oe.e,Z.c,G.c,ie.a]}),e})()}}]);